(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ce869ea4"],{"2fc4":function(e,t,r){"use strict";r("4de4");var n={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};r=r("2877"),n=Object(r.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[r("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?r("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),r("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=n.exports},"429b":function(e,t,r){"use strict";r("ef4d")},"4a67":function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return m}));t=r("96cf");var n=r("1da1"),a=r("7424"),i=r("b775");function o(e,t,r){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.PORTGETPAGE,i.a.POST,{currentPage:t,pageSize:r,dynamicFilter:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.PORTADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.PORTUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.PORTBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.PORTGETCACHEPORT,i.a.GET));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"4c2d":function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return m}));t=r("96cf");var n=r("1da1"),a=r("7424"),i=r("b775");function o(e,t,r){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SEQUENCERULEGETPAGE,i.a.POST,{currentPage:t,pageSize:r,dynamicFilter:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SEQUENCERULEADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SEQUENCERULEUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SEQUENCERULEBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SEQUENCERULEGETAUTORULECODE,i.a.GET,{autorulecode:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},aeb6:function(e,t,r){"use strict";r.d(t,"g",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return m})),r.d(t,"i",(function(){return g})),r.d(t,"d",(function(){return v})),r.d(t,"f",(function(){return y})),r.d(t,"e",(function(){return O}));t=r("96cf");var n=r("1da1"),a=r("7424"),i=r("b775");function o(e,t,r){return u.apply(this,arguments)}function u(){return(u=Object(n.a)(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEGETPAGE,i.a.POST,{currentPage:t,pageSize:r,dynamicFilter:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return s.apply(this,arguments)}function s(){return(s=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEADDDETAIL,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEUPDATEDETAIL,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return R.apply(this,arguments)}function R(){return(R=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEBATCHSOFTDETAILDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return w.apply(this,arguments)}function w(){return(w=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEGETHEDERANDDETAILASYNC,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return k.apply(this,arguments)}function k(){return(k=Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.AIRROUTEGETCACHEAIRROUTE,i.a.GET));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},ef4d:function(e,t,r){},f6fa:function(e,t,r){"use strict";r.r(t),r("a4d3"),r("e01a"),r("d81d"),r("ac1f"),r("1276"),r("96cf");var n=r("1da1"),a=r("aeb6"),i=r("4a67"),o=r("4c2d"),u=r("2fc4");u={name:"AirRoute",i18n:r("9225"),components:{MySearch:u.a},computed:{fields:function(){return[{value:"routeCode",label:"线路代码",type:"string"},{value:"routeName",label:"线路名称",type:"string"}]}},data:function(){return{minHeight:window.innerHeight-219,airRouteList:[],portList:[],loading:!1,addLoading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{},statusList:[{label:"禁用",value:0},{label:"启用",value:1}],validRules:{routeCode:[{required:!0,message:"请输入线路代码"}],originalPlace:[{required:!0,message:"请选择起始地"}],destinationPlace:[{required:!0,message:"请选择目的地"}]}}},created:function(){this.getPortList(),this.getAirRouteList()},methods:{getPortList:function(){var e=this;Object(i.c)().then((function(t){1===t.data.code&&(e.portList=t.data.data)}))},getAirRouteList:function(){var e=this;this.loading=!0,Object(a.g)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter).then((function(t){1===t.data.code&&(e.airRouteList=t.data.data.list,e.airRouteList.map((function(e){0<e.transit.length?e.transit=e.transit.split(","):e.transit=[]})),e.pagination.totalResult=t.data.data.total,e.loading=!1)}))},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getAirRouteList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getAirRouteList()},insert:function(){var e=this;this.addLoading=!0;var t={routeCode:"",transit:[]};Object(o.c)("AirRouteCodeRule").then((function(r){1===r.data.code&&(t.routeCode=r.data.data.rtRuleCode,e.$refs.xTable.insert(t),e.addLoading=!1)}))},save:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$refs.xTable,i=r.getRecordset(),n=i.insertRecords,i.removeRecords,i=i.updateRecords,0==n.length&&0==i)return t.abrupt("return",!1);t.next=4;break;case 4:return t.next=6,r.validate(!0).catch((function(e){return e}));case 6:if(t.sent)return t.abrupt("return",!1);t.next=9;break;case 9:e.loading=!0,0<n.length&&(n.reverse(),n.map((function(t){t={status:t.status,routeCode:t.routeCode,routeName:t.routeName,originalPlace:t.originalPlace,transit:t.transit,destinationPlace:t.destinationPlace,description:t.description},Object(a.a)(t).then((function(t){1===t.data.code?(e.$message.success("保存成功!"),e.getAirRouteList()):(e.loading=!1,e.$message.error(t.data.msg))}))}))),0<i.length&&i.map((function(t){t={status:t.status,routeCode:t.routeCode,routeName:t.routeName,originalPlace:t.originalPlace,transit:t.transit,destinationPlace:t.destinationPlace,description:t.description,id:t.id,version:1},Object(a.h)(t).then((function(t){1===t.data.code?(e.$message.success("保存成功!"),e.getAirRouteList()):(e.loading=!1,e.$message.error(t.data.msg))}))}));case 12:case"end":return t.stop()}}),t)})))()},batchDelete:function(){var e=this,t=this.$refs.xTable.getCheckboxRecords();if(0==t.length)return!1;t=t.map((function(e){return e.id})),Object(a.c)(t).then((function(t){1===t.data.code&&e.getAirRouteList()}))},toAirRouteDetail:function(e){this.$router.push("/AirRouteDetail?id=".concat(e.id))}}},r("429b"),r=r("2877"),u=Object(r.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"AirRoute"},[r("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:e._u([{key:"tools",fn:function(){return[r("a-space",[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:airroute:add",expression:"`api:admin:airroute:add`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"plus-circle",loading:e.addLoading},on:{click:e.insert}},[e._v(e._s(e.$t("37")))]),r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:airroute:update",expression:"`api:admin:airroute:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"save"},on:{click:e.save}},[e._v("保存")]),!e.loading&&0<e.$refs.xTable.getCheckboxRecords().length?r("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:e.batchDelete}},[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:airroute:batchsoftdelete",expression:"`api:admin:airroute:batchsoftdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除")])],1):e._e(),r("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),r("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:e.airRouteList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight,"edit-config":{trigger:"click",mode:"row",showStatus:!0},"edit-rules":e.validRules}},[r("vxe-column",{attrs:{type:"checkbox",width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){var n=t.checked;t=t.indeterminate;return[r("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleAllCheckboxRow()}}},[r("span",t?[r("a-checkbox",{attrs:{indeterminate:!0}})]:n?[r("a-checkbox",{attrs:{checked:!0}})]:[r("a-checkbox")],1)])]}},{key:"checkbox",fn:function(t){var n=t.row,a=t.checked;t=t.indeterminate;return[r("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleCheckboxRow(n)}}},[r("span",t?[r("a-checkbox",{attrs:{indeterminate:!0}})]:a?[r("a-checkbox",{attrs:{checked:!0}})]:[r("a-checkbox")],1)])]}}])}),r("vxe-column",{attrs:{field:"routeCode",title:"线路代码","edit-render":{name:"$input",defaultValue:"",props:{maxlength:30,disabled:!0}}}}),r("vxe-column",{attrs:{field:"routeName",title:"线路名称","edit-render":{name:"$input",defaultValue:"",props:{maxlength:50}}}}),r("vxe-column",{attrs:{field:"originalPlace",title:"起始地","edit-render":{}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:n.originalPlace,callback:function(t){e.$set(n,"originalPlace",t)},expression:"row.originalPlace"}},e._l(e.portList,(function(t,n){return r("el-option",{key:n,attrs:{label:t.portCode+" - "+t.cnName,value:t.portCode}},[e._v(" "+e._s(t.portCode)+" - "+e._s(t.cnName)+" ")])})),1)]}},{key:"default",fn:function(t){var n=t.row;return[e._l(e.portList,(function(t){return[n.originalPlace==t.portCode?r("span",{key:t.id},[e._v(e._s(t.portCode)+" - "+e._s(t.cnName))]):e._e()]}))]}}])}),r("vxe-column",{attrs:{field:"transit",title:"中转地","edit-render":{}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"","collapse-tags":"",filterable:"",placeholder:""},model:{value:n.transit,callback:function(t){e.$set(n,"transit",t)},expression:"row.transit"}},e._l(e.portList,(function(t,n){return r("el-option",{key:n,attrs:{label:t.portCode+" - "+t.cnName,value:t.portCode}},[e._v(" "+e._s(t.portCode)+" - "+e._s(t.cnName)+" ")])})),1)]}},{key:"default",fn:function(t){var n=t.row;return e._l(e.portList,(function(t,a){return r("span",{key:a},e._l(n.transit,(function(n,a){return r("span",{key:a},[t.portCode==n?r("span",[e._v(" "+e._s(t.portCode)+" - "+e._s(t.cnName)+" ")]):e._e()])})),0)}))}}])}),r("vxe-column",{attrs:{field:"destinationPlace",title:"目的地","edit-render":{}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:n.destinationPlace,callback:function(t){e.$set(n,"destinationPlace",t)},expression:"row.destinationPlace"}},e._l(e.portList,(function(t,n){return r("el-option",{key:n,attrs:{label:t.portCode+" - "+t.cnName,value:t.portCode}},[e._v(" "+e._s(t.portCode)+" - "+e._s(t.cnName)+" ")])})),1)]}},{key:"default",fn:function(t){var n=t.row;return[e._l(e.portList,(function(t){return[n.destinationPlace==t.portCode?r("span",{key:t.id},[e._v(e._s(t.portCode)+" - "+e._s(t.cnName))]):e._e()]}))]}}])}),r("vxe-column",{attrs:{field:"description",title:"描述","edit-render":{name:"$input",defaultValue:"",props:{maxlength:50}}}}),r("vxe-column",{attrs:{field:"status",title:"状态","edit-render":{name:"$select",defaultValue:1,options:e.statusList,props:{clearable:!1}}},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[0==t.status?r("a-tag",{attrs:{color:"#f5222d"}},[e._v("禁用")]):e._e(),1==t.status?r("a-tag",{attrs:{color:"#1890ff"}},[e._v("启用")]):e._e()]}}])}),r("vxe-column",{attrs:{title:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.id?r("a-tooltip",{attrs:{placement:"top",title:"明细"}},[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:airroute:gethederanddetailasync",expression:"`api:admin:airroute:gethederanddetailasync`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"eye"},on:{click:function(t){return e.toAirRouteDetail(n)}}})],1):e._e(),n.id?e._e():r("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:function(t){return e.$refs.xTable.remove(n)}}},[r("a-tooltip",{attrs:{placement:"top",title:"删除"}},[r("a-button",{attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1)]}}])})],1),r("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)}),[],!1,null,"4a98f141",null).exports;t.default=u}}]);