(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-569dcf46"],{7569:function(a,s,t){a.exports=t.p+"static/img/localAvatar.37c3ea6b.png"},"83d4a":function(a,s,t){"use strict";t("c35ee")},c35ee:function(a,s,t){},dcad:function(a,s,t){"use strict";t.r(s),t("b0c0");var e=t("5530"),r=t("93d6"),o=t("5880");e={name:"Setting",i18n:t("9225"),data:function(){var a=this;return{minHeight:window.innerHeight-100,icon:"camera",timeZoneList:[],loading:!1,basicform:{},basicrules:{nickName:[{validator:function(s,t,e){""===t?e(new Error(a.$t("222"))):e()},trigger:"change",required:!0}],timeZone:[{validator:function(s,t,e){""==t||null==t?e(new Error(a.$t("426"))):e()},trigger:"change",required:!0}]},basicloading:!1,basicdisabled:!1,passwordloading:!1,passwordform:{id:0,oldPassword:"",newPassword:"",confirmPassword:"",password:"",version:0},passwordrules:{oldPassword:[{validator:function(s,t,e){""===t?e(new Error(a.$t("223"))):e()},trigger:"change",required:!0}],newPassword:[{validator:function(s,t,e){""===t?e(new Error(a.$t("224"))):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$/g.test(t)?e():e(new Error(a.$t("427")))},trigger:"change",required:!0}],confirmPassword:[{validator:function(s,t,e){""===t?e(new Error(a.$t("225"))):t!==a.passwordform.newPassword?e(new Error(a.$t("226"))):e()},trigger:"change",required:!0}]}}},created:function(){this.getTimeZoneList(),this.getBasicUserInfo()},methods:Object(e.a)(Object(e.a)({},Object(o.mapMutations)("account",["setUser"])),{},{getTimeZoneList:function(){var a=this;Object(r.c)().then((function(s){1===s.data.code&&(a.timeZoneList=s.data.data)}))},getBasicUserInfo:function(){var a=this;this.loading=!0,this.basicdisabled=!0,Object(r.a)().then((function(s){1===s.data.code&&(a.basicform=s.data.data,a.loading=!1,a.basicdisabled=!1)}))},beforeUpload:function(a){var s="image/jpeg"===a.type||"image/png"===a.type;return s||this.$message.error(this.$t("227")),a=a.size/1024/1024<2,a||this.$message.error(this.$t("228")),s&&a},customRequest:function(a){var s=this;this.icon="loading";var t=new FormData;t.append("file",a.file),Object(r.h)(t).then((function(a){1===a.data.code?(s.basicform.avatar="/api/upload/admin/avatar/"+a.data.data,s.icon="camera",s.$message.success(s.$t("229"))):(s.$message.error(s.$t("230")),s.icon="camera")})).catch((function(){s.$message.error(s.$t("230")),s.icon="camera"}))},updateBasic:function(){var a=this;this.$refs.basicform.validate((function(s){s&&(a.basicloading=!0,Object(r.q)(a.basicform).then((function(s){1===s.data.code&&(a.getBasicUserInfo(),s={name:(s=JSON.parse(localStorage.getItem("admin.user"))).name,avatar:a.basicform.avatar||t("7569"),belongCode:s.belongCode,userType:s.userType,organizationList:s.organizationList},a.setUser(s),a.basicloading=!1,a.$message.success(a.$t("231")))})).catch((function(){a.$message.error(a.$t("232"))})))}))},changepassword:function(){var a=this;this.$refs.passwordform.validate((function(s){s&&(a.passwordloading=!0,a.passwordform.id=a.basicform.id,Object(r.i)(a.passwordform).then((function(s){0===s.data.code?a.$message.error(s.data.msg):(a.$message.success(a.$t("233")),a.passwordform={id:a.basicform.id,oldPassword:"",newPassword:"",confirmPassword:"",password:"",version:0}),a.passwordloading=!1})))}))}})},t("83d4a"),o=t("2877"),e=Object(o.a)(e,(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("div",{staticClass:"Setting",style:"minHeight:"+a.minHeight+"px;"},[e("a-card",{attrs:{title:a.$t("213"),loading:a.loading}},[e("a-button",{attrs:{slot:"extra",type:"primary",loading:a.basicloading,disabled:a.basicdisabled},on:{click:a.updateBasic},slot:"extra"},[a._v(a._s(a.$t("214")))]),e("div",{staticClass:"content"},[e("div",{staticClass:"avatar-box"},[e("a-upload",{attrs:{"before-upload":a.beforeUpload,customRequest:a.customRequest}},[e("a-icon",{staticClass:"icon",attrs:{type:a.icon}}),e("a-avatar",{attrs:{size:120,src:this.basicform.avatar||t("7569")}})],1)],1),e("a-form-model",{ref:"basicform",staticClass:"basicform",attrs:{model:a.basicform,rules:a.basicrules,"label-col":{span:5},"wrapper-col":{span:19}}},[e("a-form-model-item",{staticStyle:{display:"flex"},attrs:{label:a.$t("215"),prop:"nickName"}},[e("a-input",{attrs:{"max-length":20},model:{value:a.basicform.nickName,callback:function(s){a.$set(a.basicform,"nickName",s)},expression:"basicform.nickName"}})],1),e("a-form-model-item",{staticStyle:{display:"flex"},attrs:{label:a.$t("216")}},[e("a-input",{attrs:{"max-length":100},model:{value:a.basicform.remark,callback:function(s){a.$set(a.basicform,"remark",s)},expression:"basicform.remark"}})],1),e("a-form-model-item",{staticStyle:{display:"flex","margin-bottom":"0"},attrs:{label:a.$t("425"),prop:"timeZone"}},[e("a-select",{model:{value:a.basicform.timeZone,callback:function(s){a.$set(a.basicform,"timeZone",s)},expression:"basicform.timeZone"}},a._l(a.timeZoneList,(function(s,t){return e("a-select-option",{key:t,attrs:{value:s.zoneid}},[a._v(" "+a._s(s.zoneName)+" ")])})),1)],1)],1)],1)],1),e("a-card",{attrs:{title:a.$t("217")}},[e("a-button",{attrs:{slot:"extra",type:"primary",loading:a.passwordloading},on:{click:a.changepassword},slot:"extra"},[a._v(a._s(a.$t("218")))]),e("a-form-model",{ref:"passwordform",staticClass:"passwordform",attrs:{model:a.passwordform,rules:a.passwordrules}},[e("a-form-model-item",{attrs:{label:a.$t("219"),prop:"oldPassword"}},[e("a-input-password",{staticStyle:{width:"300px"},attrs:{"max-length":20},model:{value:a.passwordform.oldPassword,callback:function(s){a.$set(a.passwordform,"oldPassword",s)},expression:"passwordform.oldPassword"}})],1),e("a-form-model-item",{attrs:{label:a.$t("220"),prop:"newPassword"}},[e("a-input-password",{staticStyle:{width:"300px"},attrs:{"max-length":20},model:{value:a.passwordform.newPassword,callback:function(s){a.$set(a.passwordform,"newPassword",s)},expression:"passwordform.newPassword"}})],1),e("a-form-model-item",{attrs:{label:a.$t("221"),prop:"confirmPassword"}},[e("a-input-password",{staticStyle:{width:"300px"},attrs:{"max-length":20},model:{value:a.passwordform.confirmPassword,callback:function(s){a.$set(a.passwordform,"confirmPassword",s)},expression:"passwordform.confirmPassword"}})],1)],1)],1)],1)}),[],!1,null,"29914f64",null);s.default=e.exports}}]);