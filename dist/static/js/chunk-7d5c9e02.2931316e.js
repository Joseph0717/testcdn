(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7d5c9e02"],{2214:function(e,t,n){"use strict";n.r(t),n("4de4"),n("d81d");var r=n("786d"),a=n("a701"),i=n("cdc0"),c=n("2fc4");c={name:"SettlementObject",i18n:n("9225"),components:{MySearch:c.a},computed:{fields:function(){return[{value:"setOCode",label:"规则代码",type:"string"},{value:"setOName",label:"规则名称",type:"string"}]}},data:function(){return{minHeight:window.innerHeight-219,settlementObjectList:[],businessTypes:[],tradeClauses:[],consignorList:[],bindingDocs:[],loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{}}},created:function(){this.getDictionary(),this.getSettlementObjectList()},methods:{getDictionary:function(){var e=this;Object(i.f)(["Consignor"]).then((function(t){1===t.data.code&&(t=t.data.data,e.consignorList=t.filter((function(e){return"Consignor"===e.corporationtype}))[0].data)})),Object(a.d)(["BusinessType","TradeClause","BindingDoc"]).then((function(t){1===t.data.code&&(t=t.data.data,e.businessTypes=t.filter((function(e){return"BusinessType"===e.code}))[0].data,e.tradeClauses=t.filter((function(e){return"TradeClause"===e.code}))[0].data,e.bindingDocs=t.filter((function(e){return"BindingDoc"===e.code}))[0].data)}))},getSettlementObjectList:function(){var e=this;this.loading=!0,Object(r.d)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter).then((function(t){1===t.data.code&&(e.settlementObjectList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}))},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getSettlementObjectList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getSettlementObjectList()},insert:function(){this.$router.push({path:"/EditSettlementObject",query:{time:(new Date).getTime(),id:0,type:1}})},batchDelete:function(){var e=this,t=this.$refs.xTable.getCheckboxRecords();if(0==t.length)return!1;t=t.map((function(e){return e.id})),Object(r.b)(t).then((function(t){1===t.data.code&&e.getSettlementObjectList()}))},openLine:function(e){this.$router.push({path:"/EditSettlementObject",query:{time:(new Date).getTime(),id:e,type:2}})}}},n("7c2d"),n=n("2877"),c=Object(n.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"SettlementObject"},[n("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:e._u([{key:"tools",fn:function(){return[n("a-space",[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:settlementobject:add",expression:"`api:admin:settlementobject:add`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"plus-circle"},on:{click:e.insert}},[e._v(e._s(e.$t("37")))]),!e.loading&&0<e.$refs.xTable.getCheckboxRecords().length?n("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:e.batchDelete}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:settlementobject:batchsoftdelete",expression:"`api:admin:settlementobject:batchsoftdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除")])],1):e._e(),n("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),n("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:e.settlementObjectList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight}},[n("vxe-column",{attrs:{type:"checkbox",width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.checked;t=t.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleAllCheckboxRow()}}},[n("span",t?[n("a-checkbox",{attrs:{indeterminate:!0}})]:r?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}},{key:"checkbox",fn:function(t){var r=t.row,a=t.checked;t=t.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleCheckboxRow(r)}}},[n("span",t?[n("a-checkbox",{attrs:{indeterminate:!0}})]:a?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}}])}),n("vxe-column",{attrs:{field:"setOCode",title:"规则代码"}}),n("vxe-column",{attrs:{field:"setOName",title:"规则名称"}}),n("vxe-column",{attrs:{field:"bindingDoc",title:"绑定单据"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.bindingDocs,(function(t){return[t.value==r.bindingDoc?n("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"businessType",title:"业务类型"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.businessTypes,(function(t){return[t.code==r.businessType?n("span",{key:t.code},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"entrustCode",title:"委托人"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.consignorList,(function(t){return[t.corporationCode==r.entrustCode?n("span",{key:t.corporationCode},[e._v(e._s(t.corporationName))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"loadingPort",title:"起运港"}}),n("vxe-column",{attrs:{field:"destinationPort",title:"目的港"}}),n("vxe-column",{attrs:{field:"trade",title:"贸易条款"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.tradeClauses,(function(t){return[t.value==r.trade?n("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"remark",title:"备注"}}),n("vxe-column",{attrs:{width:"60",fixed:"right",title:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("a-space",[r.id?e._e():n("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:function(t){return e.$refs.xTable.remove(r)}}},[n("a-tooltip",{attrs:{placement:"top",title:"删除"}},[n("a-button",{attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1),r.id?n("a-tooltip",{attrs:{placement:"top",title:"明细"}},[n("a-button",{attrs:{type:"primary",size:"small",icon:"eye"},on:{click:function(t){return e.openLine(r.id)}}})],1):e._e()],1)]}}])})],1),n("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)}),[],!1,null,"222590b4",null).exports;t.default=c},"2fc4":function(e,t,n){"use strict";n("4de4");var r={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};n=n("2877"),r=Object(n.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[n("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),n("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=r.exports},4637:function(e,t,n){},"786d":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return T}));t=n("96cf");var r=n("1da1"),a=n("7424"),i=n("b775");function c(e,t,n){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTGETPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTGETHEDERANDDETAILASYNC,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTGETSELECTSETTLEMENTOBJECT,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.SETTLEMENTOBJECTGETSELECTSETTLEMENTOBJECTBYMAWB,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"7c2d":function(e,t,n){"use strict";n("4637")},cdc0:function(e,t,n){"use strict";n.d(t,"h",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"j",(function(){return T})),n.d(t,"d",(function(){return y})),n.d(t,"g",(function(){return E})),n.d(t,"f",(function(){return w}));t=n("96cf");var r=n("1da1"),a=n("7424"),i=n("b775");function c(e,t,n,r){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,c){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGETPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r,filter:c}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGET,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONADDCONTACT,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONUPDATECONTACT,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONBATCHSOFTDELETECONTACT,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGETHEDERANDDETAILASYNC,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGETCACHECORPORATIONBYTYPE,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);