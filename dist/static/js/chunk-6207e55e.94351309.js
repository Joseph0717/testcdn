(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6207e55e"],{"00d7":function(t,e,n){"use strict";n("b7d7")},"0265":function(t,e,n){"use strict";n.r(e),n("99af"),n("d81d"),n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");var i=n("5530"),a=n("6d7e"),r=n("b2b6"),o=n("a701"),c=n("2fc4"),s=n("c32d"),l=n.n(s),u=n("5880"),d=(s=n("cebe"),n.n(s));l={name:"InvoiceCompleted",i18n:n("9225"),components:{MySearch:c.a},computed:Object(i.a)(Object(i.a)({},Object(u.mapGetters)("account",["file_base","user"])),{},{fields:function(){return[{value:"invoiceNO",label:this.$t("30"),type:"string",default:!0}]}}),data:function(){return{invoiceList:[],currencyType:[],minHeight:window.innerHeight-219,loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},fileVisible:!1,fileSpinning:!1,uploadFile:[],dynamicFilter:{}}},created:function(){this.getCurrencyType(),this.getInvoiceList()},methods:{moment:l.a,getCurrencyType:function(){var t=this;Object(o.c)("Currency").then((function(e){1===e.data.code&&(t.currencyType=e.data.data)}))},getInvoiceList:function(){var t=this;this.loading=!0,this.dynamicFilter=this.dynamicFilter||{},this.dynamicFilter.filters||this.$set(this.dynamicFilter,"filters",[]),this.dynamicFilter.filters.push({field:"status",label:"status",operator:"Equal",value:2},{field:"createdUserName",label:"createdUserName",operator:"Equal",value:this.user.name}),Object(a.c)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter).then((function(e){1===e.data.code&&(t.invoiceList=e.data.data.list,t.invoiceList=t.invoiceList.map((function(t,e){return Object(i.a)(Object(i.a)({},t),{},{sort:e+1})})),t.pagination.totalResult=e.data.data.total,t.loading=!1)}))},handlePageChange:function(t){var e=t.currentPage;t=t.pageSize;this.pagination.currentPage=e,this.pagination.pageSize=t,this.getInvoiceList()},onSearch:function(t){this.dynamicFilter=t,this.pagination.currentPage=1,this.getInvoiceList()},getFile:function(t){var e=this;this.fileSpinning=!0,this.fileVisible=!0,this.uploadFile=[],Object(r.c)(0,0,{fileType:1,referenceID:t.id}).then((function(t){1===t.data.code&&(e.uploadFile=t.data.data.list,e.fileSpinning=!1)}))},download:function(t){var e=t.fileName;d.a.defaults.timeout="",d.a.defaults.responseType="blob";var n=this;n.$notification.open({key:t.id,duration:null,icon:function(t){return t("a-icon",{props:{type:"loading"}})},message:"".concat(n.$t("64"),"-").concat(e)}),Object(r.b)(t.id,{onDownloadProgress:function(i){var a=Math.round(i.loaded/i.total*100);n.$notification.open({key:t.id,duration:null,icon:function(t){return t("a-icon",{props:{type:"loading"}})},message:"".concat(n.$t("64"),"-").concat(e),description:function(t){return t("a-progress",{props:{percent:a}})}})}}).then((function(i){var a;i.data&&(a=window.URL.createObjectURL(new Blob([i.data])),(i=document.createElement("a")).style.display="none",i.href=a,i.setAttribute("download",e),document.body.appendChild(i),i.click(),n.$notification.open({key:t.id,duration:1,icon:function(t){return t("a-icon",{props:{type:"check-circle"}})},message:"".concat(n.$t("65"),"-").concat(e)}),d.a.defaults.timeout=5e3,d.a.defaults.responseType="")})).catch((function(i){d.a.defaults.timeout=5e3,d.a.defaults.responseType="",n.$notification.open({key:t.id,duration:0,icon:function(t){return t("a-icon",{props:{type:"exclamation-circle"}})},message:"".concat(n.$t("66"),"-").concat(e)})}))}}},n("00d7"),n=n("2877"),l=Object(n.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"InvoiceCompleted"},[n("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:t._u([{key:"tools",fn:function(){return[n("a-space",[n("my-search",{attrs:{fields:t.fields},on:{click:t.onSearch}})],1)]},proxy:!0}])}),n("vxe-table",{attrs:{data:t.invoiceList,loading:t.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:t.minHeight}},[n("vxe-column",{attrs:{field:"sort",title:"#",width:"50"}}),n("vxe-column",{attrs:{field:"invoiceNO",title:t.$t("30")}}),n("vxe-column",{attrs:{field:"invoiceDate",title:t.$t("31")},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(t.moment(e.invoiceDate).format("YYYY-MM-DD"))+" ")]}}])}),n("vxe-column",{attrs:{field:"invoiceAmount",title:t.$t("32")}}),n("vxe-column",{attrs:{field:"currency",title:t.$t("33")}}),n("vxe-column",{attrs:{field:"remark",title:t.$t("34")}}),n("vxe-column",{attrs:{field:"status",title:t.$t("35")},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[0==e.status?n("a-tag",{attrs:{color:"#2db7f5"}},[t._v(t._s(t.$t("38")))]):t._e(),1==e.status?n("a-tag",{attrs:{color:"#108ee9"}},[t._v(t._s(t.$t("39")))]):t._e(),2==e.status?n("a-tag",{attrs:{color:"#87d068"}},[t._v(t._s(t.$t("40")))]):t._e(),3==e.status?n("a-tag",{attrs:{color:"#ff4d4f"}},[t._v(t._s(t.$t("41")))]):t._e()]}}])}),n("vxe-column",{attrs:{title:t.$t("36")},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[n("a-space",[n("a-tooltip",{attrs:{placement:"top",title:t.$t("45")}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:file:getpage",expression:"`api:admin:file:getpage`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"folder"},on:{click:function(e){return t.getFile(i)}}})],1)],1)]}}])})],1),n("vxe-pager",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":t.handlePageChange}}),n("a-modal",{attrs:{destroyOnClose:!0,title:t.$t("53"),footer:null,centered:"",width:700,visible:t.fileVisible,maskClosable:!1},on:{cancel:function(e){t.fileVisible=!1}}},[n("template",{slot:"closeIcon"},[n("a-button",{attrs:{type:"danger",size:"small",shape:"circle",icon:"close-circle"}})],1),n("a-spin",{attrs:{spinning:t.fileSpinning}},[n("a-list",{staticStyle:{"min-height":"30px"},attrs:{size:"small",bordered:"","data-source":t.uploadFile},scopedSlots:t._u([{key:"renderItem",fn:function(e){return n("a-list-item",{},[n("a-list-item-meta",{attrs:{description:e.fileName}}),n("a-space",[n("a-tooltip",{attrs:{placement:"top",title:t.$t("54")}},[n("a-button",{attrs:{type:"primary",size:"small",icon:"download"},on:{click:function(n){return t.download(e)}}})],1)],1)],1)}}])})],1)],2)],1)}),[],!1,null,"0f98ffb1",null).exports;e.default=l},"2fc4":function(t,e,n){"use strict";n("4de4");var i={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(t){this.filter.field=t},onSearch:function(t){this.filter.value=t,t=this.filter,this.$emit("click",t)}}};n=n("2877"),i=Object(n.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-input-search",{attrs:{allowClear:""},on:{search:t.onSearch}},[n("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:t.change},slot:"addonBefore",model:{value:t.filter.field,callback:function(e){t.$set(t.filter,"field",e)},expression:"filter.field"}},[t._l(t.fields,(function(e){return["string"==e.type?n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")]):t._e()]}))],2),n("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);e.a=i.exports},"6d7e":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return p}));e=n("96cf");var i=n("1da1"),a=n("7424"),r=n("b775");function o(t,e,n){return c.apply(this,arguments)}function c(){return(c=Object(i.a)(regeneratorRuntime.mark((function t(e,n,i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.e)(a.INVOICEUPLOADGETPAGE,r.a.POST,{currentPage:e,pageSize:n,dynamicFilter:i}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(t){return l.apply(this,arguments)}function l(){return(l=Object(i.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.e)(a.INVOICEUPLOADSOFTDELETE,r.a.DELETE,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){return d.apply(this,arguments)}function d(){return(d=Object(i.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.e)(a.BILLINGINVOICEUPLOAD,r.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e,n){return f.apply(this,arguments)}function f(){return(f=Object(i.a)(regeneratorRuntime.mark((function t(e,n,i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(r.e)(a.INVOICEAUDIT+"?id="+e+"&status="+n+"&comment="+i,r.a.POST));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},b7d7:function(t,e,n){}}]);