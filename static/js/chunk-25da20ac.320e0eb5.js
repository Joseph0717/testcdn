(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-25da20ac"],{"2fc4":function(e,t,a){"use strict";a("4de4"),a("d3b7");var r={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};a=a("2877"),a=Object(a.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[a("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),a("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=a.exports},ad04:function(e,t,a){"use strict";a("c817")},c817:function(e,t,a){},d378:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return f}));var r=a("1da1"),i=(a("96cf"),a("7424")),n=a("b775");function s(e,t,a){return o.apply(this,arguments)}function o(){return(o=Object(r.a)(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n.e)(i.ROLEGETPAGE,n.a.POST,{currentPage:t,pageSize:a,dynamicFilter:r}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return c.apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n.e)(i.ROLEADD,n.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n.e)(i.ROLEUPDATE,n.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n.e)(i.ROLEBATCHSOFTDELETE,n.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},d55f:function(e,t,a){"use strict";a.r(t),a("d9e2"),a("ac1f"),a("00b4"),a("4e82"),a("d81d"),a("99af"),a("4de4"),a("d3b7");var r=a("93d6"),i=a("d378"),n=a("a701"),s=a("1da1"),o=(a("96cf"),a("7424")),l=a("b775");function c(){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l.e)(o.SUPPLIERGETCACHE,l.a.POST));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,a){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l.e)(o.PROJECTGETPAGE,l.a.POST,{currentPage:t,pageSize:a,dynamicFilter:r}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l.e)(o.PROJECTGETCACHE,l.a.POST));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=a("309a"),g=a("2ef0"),v=a.n(g),b=(g=a("2fc4"),a("ca00"));g={name:"User",i18n:a("9225"),components:{MySearch:g.a},computed:{fields:function(){return[{value:"userName",label:this.$t("2"),type:"string",default:!0},{value:"nickName",label:this.$t("13"),type:"string"}]},fields2:function(){return[{value:"projctContractNO",label:this.$t("108"),type:"string",default:!0},{value:"supplierCode",label:this.$t("110"),type:"string"},{value:"scac",label:"SCAC",type:"string"}]}},data:function(){var e=this;return{userList:[],roleList:[],userType:[],systemType:[],timeZoneList:[],supplierList:[],projectList:[],projectCache:[],organizationList:[],minHeight:window.innerHeight-219,loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},form:{},rules:{userName:[{validator:function(t,a,r){""===a?r(new Error(e.$t("5"))):/[\u4e00-\u9fa5]/g.test(a)?r(new Error("请输入除中文以外的字符!")):r()},trigger:"change",required:!0}],password:[{validator:function(t,a,r){""===a?r(new Error(e.$t("6"))):/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$/g.test(a)?r():r(new Error(e.$t("427")))},trigger:"change",required:!0}],email:[{validator:function(t,a,r){""===a?r(new Error(e.$t("19"))):/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(a)?r():r(new Error(e.$t("20")))},trigger:"change",required:!0}],nickName:[{validator:function(t,a,r){""===a?r(new Error(e.$t("18"))):r()},trigger:"change",required:!0}],roleIds:[{validator:function(t,a,r){0==a.length?r(new Error(e.$t("322"))):r()},trigger:"change",required:!0}],userType:[{validator:function(t,a,r){""===a||0===a?r(new Error(e.$t("323"))):r()},trigger:"change",required:!0}],timeZone:[{validator:function(t,a,r){""==a||null==a?r(new Error(e.$t("426"))):r()},trigger:"change",required:!0}],venderCode:[{validator:function(t,a,r){""==a||null==a?r(new Error(e.$t("429"))):r()},trigger:"change",required:!0}],defaultSystemType:[{validator:function(e,t,a){""==t||null==t?a(new Error("请选择默认系统类型")):a()},trigger:"change",required:!0}],orgList:[{validator:function(e,t,a){0==t.length?a(new Error("请选择组织(企业)架构")):a()},trigger:"change",required:!0}]},title:"",type:"",spinning:!1,visible:!1,disabled:!1,confirmLoading:!1,dynamicFilter:{},loading2:!1,pagination2:{currentPage:1,pageSize:20,totalResult:0},dynamicFilter2:{},selectedList:[]}},created:function(){this.getUserList(),this.getRoleList(),this.getUserType(),this.getSystemType(),this.getTimeZoneList(),this.getSupplierList(),this.getProjectList(),this.getProjectCache(),this.getOrganizationList()},methods:{getSystemType:function(){var e=this;Object(n.c)("SystemType").then((function(t){1===t.data.code&&(e.systemType=t.data.data,e.systemType.sort(Object(b.a)("value",!0)))}))},getOrganizationList:function(){var e=this;Object(h.c)().then((function(t){1===t.data.code&&(e.organizationList=t.data.data.list)}))},getUserList:function(){var e=this;this.loading=!0,Object(r.o)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter).then((function(t){1===t.data.code&&(e.userList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}))},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getUserList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getUserList()},getRoleList:function(){var e=this;Object(i.c)().then((function(t){1===t.data.code&&(e.roleList=t.data.data.list)}))},getUserType:function(){var e=this;Object(n.c)("UserType").then((function(t){1===t.data.code&&(e.userType=t.data.data)}))},getTimeZoneList:function(){var e=this;Object(r.c)().then((function(t){1===t.data.code&&(e.timeZoneList=t.data.data)}))},getSupplierList:function(){var e=this;c().then((function(t){1===t.data.code&&(e.supplierList=t.data.data)}))},getProjectCache:function(){var e=this;p().then((function(t){1===t.data.code&&(e.projectCache=t.data.data)}))},getProjectList:function(){var e=this;this.loading2=!0,this.dynamicFilter2=this.dynamicFilter2||{},this.dynamicFilter2.filters=[],this.dynamicFilter2.filters||this.$set(this.dynamicFilter2,"filters",[]),null!=this.selectedList&&(this.selectedList.map((function(t){e.dynamicFilter2.filters.push({field:"scac",label:"scac",operator:"NotEqual",value:t.scac})})),this.dynamicFilter2.filters=v.a.uniq(this.dynamicFilter2.filters)),d(this.pagination2.currentPage,this.pagination2.pageSize,this.dynamicFilter2).then((function(t){1===t.data.code&&(e.projectList=t.data.data.list,e.pagination2.totalResult=t.data.data.total,e.loading2=!1)}))},handlePageChange2:function(e){var t=e.currentPage;e=e.pageSize;this.pagination2.currentPage=t,this.pagination2.pageSize=e,this.getProjectList()},onSearch2:function(e){this.dynamicFilter2=e,this.pagination2.currentPage=1,this.getProjectList()},toRight:function(){var e=v.a.concat(this.$refs.xTable1.getCheckboxRecords(),this.$refs.xTable1.getCheckboxReserveRecords());if(0==e.length)return!1;this.selectedList=v.a.uniq(v.a.concat(this.selectedList,e)),this.$refs.xTable2.clearCheckboxRow(),this.getProjectList()},toLeft:function(){var e=v.a.concat(this.$refs.xTable2.getCheckboxRecords(),this.$refs.xTable2.getCheckboxReserveRecords());if(0==e.length)return!1;this.selectedList=this.selectedList.filter((function(t){return!e.some((function(e){return e.scac==t.scac}))})),this.$refs.xTable2.clearCheckboxRow(),this.getProjectList()},showModalAdd:function(){this.title=this.$t("37"),this.type="add",this.visible=!0,this.selectedList=[],this.dynamicFilter2={},this.getProjectList(),this.form={userName:"",password:"",email:"",nickName:"",status:1,remark:"",userType:"",belongCode:"",roleIds:[],timeZone:"",venderCode:"",scacs:[],defaultSystemType:"",orgList:[]}},showModalEdit:function(e){var t=this;this.title=this.$t("78"),this.type="edit",this.disabled=!0,this.visible=!0,this.spinning=!0,this.selectedList=[],this.dynamicFilter2={},Object(r.l)(e.id).then((function(e){1===e.data.code&&(e=e.data.data,t.form=e,""!=t.form.orgList&&null!=t.form.orgList||(t.form.orgList=[]),null!=t.form.scacs&&t.projectCache.map((function(e){t.form.scacs.map((function(a){e.scac==a&&t.selectedList.push(e)}))})),t.getProjectList(),t.spinning=!1,t.disabled=!1)}))},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(t){if(0==e.selectedList.length)return e.$message.warning(e.$t("432")),!1;e.confirmLoading=!0,e.form.scacs=e.selectedList.map((function(e){return e.scac})),("add"==e.type?Object(r.g)(e.form).then((function(t){1===t.data.code&&(e.getUserList(),e.confirmLoading=!1,e.visible=!1)})):Object(r.k)(e.form).then((function(t){1===t.data.code&&(e.getUserList(),e.confirmLoading=!1,e.visible=!1)}))).catch((function(){e.confirmLoading=!1,e.$message.error(e.$t("25"))}))}}))},handleCancel:function(){this.visible=!1,this.confirmLoading=!1},confirmDelete:function(e){var t=this;Object(r.j)(e.id).then((function(e){1===e.data.code&&t.getUserList()}))},filterOption:function(e,t){return 0<=t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())}}},a("ad04"),a=a("2877"),a=Object(a.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"User"},[a("vxe-toolbar",{scopedSlots:e._u([{key:"tools",fn:function(){return[a("a-space",[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:user:add",expression:"`api:admin:user:add`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"plus-circle"},on:{click:e.showModalAdd}},[e._v(e._s(e.$t("37")))]),a("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),a("vxe-table",{attrs:{data:e.userList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight}},[a("vxe-column",{attrs:{field:"userName",title:e.$t("2")}}),a("vxe-column",{attrs:{field:"nickName",title:e.$t("13")}}),a("vxe-column",{attrs:{field:"roleNames",title:e.$t("320")},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[a("span",[e._v(e._s(t.roleNames.join(",")))])]}}])}),a("vxe-column",{attrs:{field:"defaultSystemType",title:"默认系统"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.systemType,(function(t,i){return[t.value==r.defaultSystemType?a("span",{key:i},[e._v(e._s(t.name))]):e._e()]}))]}}])}),a("vxe-column",{attrs:{field:"createdTime",title:e.$t("73")}}),a("vxe-column",{attrs:{field:"remark",title:e.$t("34")}}),a("vxe-column",{attrs:{field:"status",title:e.$t("35")},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[a("a-tag",{attrs:{color:1==t.status?"#108ee9":"#f50"}},[e._v(e._s(1==t.status?e.$t("200"):e.$t("201")))])]}}])}),a("vxe-column",{attrs:{title:e.$t("36")},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("a-space",[a("a-tooltip",{attrs:{placement:"top",title:e.$t("78")}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:user:update",expression:"`api:admin:user:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return e.showModalEdit(r)}}})],1),a("a-tooltip",{attrs:{placement:"top",title:e.$t("46")}},[a("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:function(t){return e.confirmDelete(r)}}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:user:softdelete",expression:"`api:admin:user:softdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1)],1)]}}])})],1),a("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}}),a("a-modal",{attrs:{width:1e3,destroyOnClose:!0,title:e.title,centered:"",visible:e.visible,"confirm-loading":e.confirmLoading,maskClosable:!1,"ok-button-props":{props:{disabled:e.disabled}}},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("template",{slot:"closeIcon"},[a("a-button",{attrs:{type:"danger",size:"small",shape:"circle",icon:"close-circle"}})],1),a("a-tabs",{attrs:{"default-active-key":1}},[a("a-tab-pane",{key:1,attrs:{tab:e.$t("153"),forceRender:!0}},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("a-form-model-item",{attrs:{label:e.$t("2"),prop:"userName"}},[a("a-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),"edit"!=e.type?a("a-form-model-item",{attrs:{label:e.$t("3"),prop:"password"}},[a("a-input-password",{model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),a("a-form-model-item",{attrs:{label:e.$t("14"),prop:"email"}},[a("a-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("a-form-model-item",{attrs:{label:e.$t("13"),prop:"nickName"}},[a("a-input",{model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),a("a-form-model-item",{attrs:{label:e.$t("320"),prop:"roleIds"}},[a("a-select",{attrs:{mode:"multiple","option-label-prop":"label"},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id,label:t.name}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("321"),prop:"userType"}},[a("a-select",{model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},e._l(e.userType,(function(t,r){return a("a-select-option",{key:r,attrs:{value:Number(t.value)}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("425"),prop:"timeZone"}},[a("a-select",{model:{value:e.form.timeZone,callback:function(t){e.$set(e.form,"timeZone",t)},expression:"form.timeZone"}},e._l(e.timeZoneList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.zoneid}},[e._v(" "+e._s(t.zoneName)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("428"),prop:"venderCode"}},[a("a-select",{attrs:{"show-search":"","option-filter-prop":"children","filter-option":e.filterOption},model:{value:e.form.venderCode,callback:function(t){e.$set(e.form,"venderCode",t)},expression:"form.venderCode"}},e._l(e.supplierList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.supplierCode}},[e._v(" "+e._s(t.supplierName)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"默认系统类型",prop:"defaultSystemType"}},[a("a-select",{model:{value:e.form.defaultSystemType,callback:function(t){e.$set(e.form,"defaultSystemType",t)},expression:"form.defaultSystemType"}},e._l(e.systemType,(function(t,r){return a("a-select-option",{key:r,attrs:{value:Number(t.value)}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"组织(企业)架构",prop:"orgList"}},[a("a-select",{attrs:{mode:"multiple","option-label-prop":"label"},model:{value:e.form.orgList,callback:function(t){e.$set(e.form,"orgList",t)},expression:"form.orgList"}},e._l(e.organizationList,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.id.toString(),label:t.orgName}},[e._v(" "+e._s(t.orgName)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:e.$t("34")}},[a("a-input",{model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("a-form-model-item",{attrs:{label:e.$t("35")}},[a("a-switch",{attrs:{checked:0!=e.form.status,size:"small"},on:{click:function(t){e.form.status=0==e.form.status?1:0}}})],1)],1)],1)],1),a("a-tab-pane",{key:2,staticClass:"selectScac",attrs:{tab:e.$t("433"),forceRender:!0}},[a("a-card",{staticClass:"left",attrs:{size:"small",title:e.$t("430")}},[a("template",{slot:"extra"},[a("my-search",{attrs:{fields:e.fields2},on:{click:e.onSearch2}})],1),a("vxe-table",{ref:"xTable1",attrs:{data:e.projectList,loading:e.loading2,"show-overflow":"",resizable:"",border:"",height:"400","row-id":"id","checkbox-config":{reserve:!0},"highlight-hover-row":""}},[a("vxe-column",{attrs:{type:"checkbox",width:"50"}}),a("vxe-column",{attrs:{field:"projctContractNO",title:e.$t("108")}}),a("vxe-column",{attrs:{field:"supplierCode",title:e.$t("110")}}),a("vxe-column",{attrs:{field:"scac",title:"SCAC"}}),a("vxe-column",{attrs:{field:"status",title:e.$t("35")},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[0==t.status?a("span",[e._v(e._s(e.$t("103")))]):e._e(),1==t.status?a("span",[e._v(e._s(e.$t("104")))]):e._e(),2==t.status?a("span",[e._v(e._s(e.$t("105")))]):e._e(),3==t.status?a("span",[e._v(e._s(e.$t("106")))]):e._e(),4==t.status?a("span",[e._v(e._s(e.$t("107")))]):e._e()]}}])})],1),a("vxe-pager",{attrs:{"current-page":e.pagination2.currentPage,"page-size":e.pagination2.pageSize,total:e.pagination2.totalResult,"page-sizes":[20,50,100,200]},on:{"page-change":e.handlePageChange2}})],2),a("div",{staticClass:"center"},[a("a-button",{attrs:{type:"primary",icon:"right"},on:{click:e.toRight}}),a("a-button",{attrs:{icon:"left"},on:{click:e.toLeft}})],1),a("a-card",{staticClass:"right",attrs:{size:"small",title:e.$t("431")}},[a("vxe-table",{ref:"xTable2",attrs:{data:e.selectedList,"show-overflow":"",resizable:"",border:"",height:"400","row-id":"id","checkbox-config":{reserve:!0},"highlight-hover-row":""}},[a("vxe-column",{attrs:{type:"checkbox",width:"50"}}),a("vxe-column",{attrs:{field:"projctContractNO",title:e.$t("108")}}),a("vxe-column",{attrs:{field:"supplierCode",title:e.$t("110")}}),a("vxe-column",{attrs:{field:"scac",title:"SCAC"}})],1)],1)],1)],1)],2)],1)}),[],!1,null,"64c2dd0e",null);t.default=a.exports}}]);