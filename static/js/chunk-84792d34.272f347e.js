(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-84792d34"],{"2fc4":function(t,e,n){"use strict";n("4de4"),n("d3b7");var r={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(t){this.filter.field=t},onSearch:function(t){this.filter.value=t,t=this.filter,this.$emit("click",t)}}};n=n("2877"),n=Object(n.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-input-search",{attrs:{allowClear:""},on:{search:t.onSearch}},[n("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:t.change},slot:"addonBefore",model:{value:t.filter.field,callback:function(e){t.$set(t.filter,"field",e)},expression:"filter.field"}},[t._l(t.fields,(function(e){return["string"==e.type?n("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")]):t._e()]}))],2),n("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);e.a=n.exports},4341:function(t,e,n){},6199:function(t,e,n){"use strict";n("4341")},"914d":function(t,e,n){"use strict";n.r(e),n("4de4"),n("d3b7"),n("d81d");var r=n("fb04"),a=n("a701"),i=n("cdc0"),u=n("2fc4"),c=n("c32d");c=n.n(c),u={name:"Billing",i18n:n("9225"),components:{MySearch:u.a},computed:{fields:function(){return[{value:"billingNO",label:"账单号",type:"string"},{value:"billingMonth",label:"账单月",type:"string"},{value:"billingDate",label:"账单日期",type:"string"}]}},data:function(){return{minHeight:window.innerHeight-219,menuID:this.$route.meta.id,billingList:[],settlementpeopleList:[],ARAPs:[],loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{}}},created:function(){this.getBillingList(),this.getDictionary()},methods:{moment:c.a,getDictionary:function(){var t=this;Object(i.f)(["Settlementpeople"]).then((function(e){1===e.data.code&&(e=e.data.data,t.settlementpeopleList=e.filter((function(t){return"Settlementpeople"===t.corporationtype}))[0].data)})),Object(a.d)(["ARAP"]).then((function(e){1===e.data.code&&(e=e.data.data,t.ARAPs=e.filter((function(t){return"ARAP"===t.code}))[0].data)}))},getBillingList:function(){var t=this;switch(this.loading=!0,this.menuID){case 614:Object(r.i)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(e){1===e.data.code&&(t.billingList=e.data.data.list,t.pagination.totalResult=e.data.data.total,t.loading=!1)}));break;case 615:Object(r.g)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(e){1===e.data.code&&(t.billingList=e.data.data.list,t.pagination.totalResult=e.data.data.total,t.loading=!1)}));break;case 616:Object(r.h)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(e){1===e.data.code&&(t.billingList=e.data.data.list,t.pagination.totalResult=e.data.data.total,t.loading=!1)}));break;case 0xe2f63c1f8045:Object(r.f)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(e){1===e.data.code&&(t.billingList=e.data.data.list,t.pagination.totalResult=e.data.data.total,t.loading=!1)}))}},handlePageChange:function(t){var e=t.currentPage;t=t.pageSize;this.pagination.currentPage=e,this.pagination.pageSize=t,this.getBillingList()},onSearch:function(t){this.dynamicFilter=t,this.pagination.currentPage=1,this.getBillingList()},insert:function(){this.$router.push({path:"/EditBilling",query:{id:0,type:1}})},update:function(t){this.$router.push({path:"/EditBilling",query:{id:t.id,type:2}})},remove:function(t){var e=this;Object(r.j)(t.id).then((function(t){1===t.data.code&&e.getBillingList()}))},review:function(t){this.$router.push({path:"/ReviewBilling",query:{id:t.id}})},changeStatus:function(){var t=this,e=this.$refs.xTable.getCheckboxRecords().map((function(t){return{id:t.id}}));0!=e.length?(e={idlist:e,status:1},Object(r.c)(e).then((function(e){1===e.data.code?(t.$message.success("操作成功!"),t.getBillingList()):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error("系统内部错误!")}))):this.$message.error("请选择账单!")}}},n("6199"),c=n("2877"),n=Object(c.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Billing"},[n("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:t._u([{key:"tools",fn:function(){return[n("a-space",[614==t.menuID||616==t.menuID?n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:add",expression:"`api:admin:billing:add`",arg:"permission"}],attrs:{type:"primary"},on:{click:t.insert}},[t._v("新增")]):t._e(),614==t.menuID||616==t.menuID?n("a-popconfirm",{attrs:{title:"确认通过吗?"},on:{confirm:function(e){return t.changeStatus()}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:chengebillingstatusasync",expression:"`api:admin:billing:chengebillingstatusasync`",arg:"permission"}],attrs:{type:"primary"}},[t._v("审核")])],1):t._e(),n("my-search",{attrs:{fields:t.fields},on:{click:t.onSearch}})],1)]},proxy:!0}])}),n("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:t.billingList,loading:t.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:t.minHeight}},[n("vxe-column",{attrs:{type:"checkbox",width:"50",fixed:"left"},scopedSlots:t._u([{key:"header",fn:function(e){var r=e.checked;e=e.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(e){return e.stopPropagation(),t.$refs.xTable.toggleAllCheckboxRow()}}},[n("span",e?[n("a-checkbox",{attrs:{indeterminate:!0}})]:r?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}},{key:"checkbox",fn:function(e){var r=e.row,a=e.checked;e=e.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(e){return e.stopPropagation(),t.$refs.xTable.toggleCheckboxRow(r)}}},[n("span",e?[n("a-checkbox",{attrs:{indeterminate:!0}})]:a?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}}])}),n("vxe-column",{attrs:{field:"billingNO",title:"账单号"}}),n("vxe-column",{attrs:{field:"billingMonth",title:"账单月"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(e.billingMonth?t.moment(e.billingMonth).format("YYYY-MM"):"")+" ")]}}])}),n("vxe-column",{attrs:{field:"billingDate",title:"账单日期"},scopedSlots:t._u([{key:"default",fn:function(e){return e=e.row,[t._v(" "+t._s(e.billingDate?t.moment(e.billingDate).format("YYYY-MM-DD"):"")+" ")]}}])}),n("vxe-column",{attrs:{field:"billingType",title:"账单类型"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._l(t.ARAPs,(function(e){return[e.value==r.billingType?n("span",{key:e.value},[t._v(t._s(e.name))]):t._e()]}))]}}])}),n("vxe-column",{attrs:{field:"partnerCode",title:"结算对象"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[t._l(t.settlementpeopleList,(function(e){return[e.corporationCode==r.partnerCode?n("span",{key:e.corporationCode},[t._v(t._s(e.corporationName))]):t._e()]}))]}}])}),n("vxe-column",{attrs:{width:"100",title:"操作",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("a-space",[614==t.menuID||616==t.menuID?n("a-tooltip",{attrs:{placement:"top",title:"编辑"}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:update",expression:"`api:admin:billing:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(e){return t.update(r)}}})],1):t._e(),614==t.menuID||616==t.menuID?n("a-tooltip",{attrs:{placement:"top",title:"删除"}},[n("a-popconfirm",{attrs:{title:"确认删除吗?"},on:{confirm:function(e){return t.remove(r)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:softdelete",expression:"`api:admin:billing:softdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1):t._e(),615==t.menuID||0xe2f63c1f8045==t.menuID?n("a-tooltip",{attrs:{placement:"top",title:"查看账单"}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:getbillingdetailasync",expression:"`api:admin:billing:getbillingdetailasync`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"eye"},on:{click:function(e){return t.review(r)}}})],1):t._e()],1)]}}])})],1),n("vxe-pager",{attrs:{"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,total:t.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":t.handlePageChange}})],1)}),[],!1,null,"e0a4d262",null).exports;e.default=n},cdc0:function(t,e,n){"use strict";n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"i",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return m})),n.d(e,"j",(function(){return O})),n.d(e,"d",(function(){return v})),n.d(e,"g",(function(){return w})),n.d(e,"f",(function(){return k}));var r=n("1da1"),a=(n("96cf"),n("7424")),i=n("b775");function u(t,e,n,r){return c.apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,u){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONGETPAGE,i.a.POST,{currentPage:e,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(t){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONADD,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONGET,i.a.GET,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONUPDATE,i.a.PUT,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return h.apply(this,arguments)}function h(){return(h=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONBATCHSOFTDELETE,i.a.PUT,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return b.apply(this,arguments)}function b(){return(b=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONADDCONTACT,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONUPDATECONTACT,i.a.PUT,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONBATCHSOFTDELETECONTACT,i.a.PUT,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return T.apply(this,arguments)}function T(){return(T=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONGETHEDERANDDETAILASYNC,i.a.GET,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return P.apply(this,arguments)}function P(){return(P=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.CORPORATIONGETCACHECORPORATIONBYTYPE,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},fb04:function(t,e,n){"use strict";n.d(e,"i",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"a",(function(){return g})),n.d(e,"k",(function(){return m})),n.d(e,"j",(function(){return O})),n.d(e,"e",(function(){return v})),n.d(e,"b",(function(){return w})),n.d(e,"d",(function(){return k})),n.d(e,"c",(function(){return x}));var r=n("1da1"),a=(n("96cf"),n("7424")),i=n("b775");function u(t,e,n,r){return c.apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,u){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGGETUNCHECKEDARPAGE,i.a.POST,{currentPage:e,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(t,e,n,r){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,u){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGGETCHECKEDARPAGE,i.a.POST,{currentPage:e,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(t,e,n,r){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,u){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGGETUNCHECKEDAPPAGE,i.a.POST,{currentPage:e,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(t,e,n,r){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,u){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGGETCHECKEDAPPAGE,i.a.POST,{currentPage:e,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(t){return h.apply(this,arguments)}function h(){return(h=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGADD,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(t){return b.apply(this,arguments)}function b(){return(b=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGUPDATE,i.a.PUT,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(t){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGSOFTDELETE,i.a.DELETE,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGGETBILLINGDETAILASYNC,i.a.GET,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return T.apply(this,arguments)}function T(){return(T=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGADDCHARGELINE,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return P.apply(this,arguments)}function P(){return(P=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGDELCHARGELINE,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return E.apply(this,arguments)}function E(){return(E=Object(r.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(a.BILLINGCHENGEBILLINGSTATUSASYNC,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);