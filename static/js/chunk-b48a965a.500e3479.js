(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b48a965a"],{1474:function(e,t,a){"use strict";a.r(t);var i=a("5530"),r=(a("d3b7"),a("159b"),a("d81d"),a("fb6a"),a("a434"),a("1da1")),n=(a("96cf"),a("7424")),o=a("b775");function l(e,t,a){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function e(t,a,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.AIRCRAFTPALLETGETPAGE,o.a.POST,{currentPage:t,pageSize:a,dynamicFilter:i}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return f.apply(this,arguments)}function f(){return(f=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.AIRCRAFTPALLETADD,o.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return u.apply(this,arguments)}function u(){return(u=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.AIRCRAFTPALLETGET,o.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.AIRCRAFTPALLETUPDATE,o.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return(g=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.AIRCRAFTPALLETBATCHSOFTDELETE,o.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=a("a701"),v=a("b2b6"),y=a("2fc4"),x=a("5880");y={name:"AircraftPallet",i18n:a("9225"),components:{MySearch:y.a},computed:Object(i.a)(Object(i.a)({},Object(x.mapGetters)("account",["file_base"])),{},{fields:function(){return[{value:"aircraftType",label:"机型",type:"string"},{value:"aircraftPalletType",label:"版型",type:"string"}]}}),data:function(){return{minHeight:window.innerHeight-219,aircraftTypes:[],aircraftPalletTypes:[],aircraftPalletList:[],loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{},visible:!1,title:"",type:"",confirmLoading:!1,spinning:!1,disabled:!1,form:{},rules:{aircraftType:[{required:!0,message:"请选择机型",trigger:"change"}],aircraftPalletType:[{required:!0,message:"请选择版型",trigger:"change"}]},fileList:[],file_visible:!1,files:{}}},created:function(){this.getAircraftType(),this.getAircraftPalletType(),this.getAircraftPalletList()},methods:{getAircraftType:function(){var e=this;Object(b.c)("AircraftType").then((function(t){1===t.data.code&&(e.aircraftTypes=t.data.data)}))},getAircraftPalletType:function(){var e=this;Object(b.c)("AircraftPalletType").then((function(t){1===t.data.code&&(e.aircraftPalletTypes=t.data.data)}))},getAircraftPalletList:function(){var e=this;this.loading=!0,l(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter).then((function(t){1===t.data.code&&(e.aircraftPalletList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}))},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getAircraftPalletList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getAircraftPalletList()},insert:function(){this.title="新增",this.type="add",this.visible=!0,this.form={status:1,aircraftType:"",aircraftPalletType:"",apLength:0,apWidth:0,apHeight:0,minWeight:0,maxWeight:0,minVolume:0,maxVolume:0,remark:""},this.fileList=[]},edit:function(e){var t=this;this.title="编辑",this.type="edit",this.visible=!0,this.spinning=!0,this.disabled=!0,this.fileList=[],p(e.id).then((function(e){1===e.data.code&&(t.form=e.data.data,t.spinning=!1,t.disabled=!1)}))},handleOk:function(){var e=this;this.$refs.form.validate((function(t){if(t){e.confirmLoading=!0;var a=new FormData;if(e.fileList.forEach((function(e){a.append("file",e)})),a.append("status",e.form.status),a.append("aircraftPalletCode",e.form.aircraftPalletCode),a.append("aircraftPalleName",e.form.aircraftPalleName),a.append("aircraftType",e.form.aircraftType),a.append("aircraftPalletType",e.form.aircraftPalletType),a.append("apLength",e.form.apLength),a.append("apWidth",e.form.apWidth),a.append("apHeight",e.form.apHeight),a.append("minWeight",e.form.minWeight),a.append("maxWeight",e.form.maxWeight),a.append("minVolume",e.form.minVolume),a.append("maxVolume",e.form.maxVolume),a.append("remark",e.form.remark),"add"==e.type){if(0==e.fileList.length)return e.confirmLoading=!1,void e.$message.info("请选择图片");c(a).then((function(t){1===t.data.code?(e.visible=!1,e.confirmLoading=!1,e.$message.success("保存成功!"),e.getAircraftPalletList()):(e.$message.error(t.data.msg),e.confirmLoading=!1)}))}else a.append("id",e.form.id),a.append("version",e.form.version),m(a).then((function(t){1===t.data.code?(e.visible=!1,e.confirmLoading=!1,e.$message.success("保存成功!"),e.getAircraftPalletList()):(e.$message.error(t.data.msg),e.confirmLoading=!1)}))}}))},cancel:function(){this.visible=!1},batchDelete:function(){var e=this,t=this.$refs.xTable.getCheckboxRecords();if(0==t.length)return!1;h(t.map((function(e){return e.id}))).then((function(t){1===t.data.code&&e.getAircraftPalletList()}))},beforeUpload:function(e){return!(this.fileList=[e])},fileChange:function(e){e.file.size/1024/1024<5||(this.$message.error("图片不能大于5M"),this.handleRemove(e.file))},handleRemove:function(e){e=this.fileList.indexOf(e);var t=this.fileList.slice();t.splice(e,1),this.fileList=t},getFile:function(e){var t=this;this.file_visible=!0,this.files={},Object(v.c)(0,0,{referenceID:e.id}).then((function(e){1===e.data.code&&(t.files=e.data.data.list[0])}))}}},a("dd12"),i=a("2877"),x=Object(i.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"AircraftPallet"},[a("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:e._u([{key:"tools",fn:function(){return[a("a-space",[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:aircraftpallet:add",expression:"`api:admin:aircraftpallet:add`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"plus-circle"},on:{click:e.insert}},[e._v(e._s(e.$t("37")))]),!e.loading&&0<e.$refs.xTable.getCheckboxRecords().length?a("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:e.batchDelete}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:aircraftpallet:batchsoftdelete",expression:"`api:admin:aircraftpallet:batchsoftdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}},[e._v("删除")])],1):e._e(),a("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),a("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:e.aircraftPalletList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight}},[a("vxe-column",{attrs:{type:"checkbox",width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){var i=t.checked;t=t.indeterminate;return[a("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleAllCheckboxRow()}}},[a("span",t?[a("a-checkbox",{attrs:{indeterminate:!0}})]:i?[a("a-checkbox",{attrs:{checked:!0}})]:[a("a-checkbox")],1)])]}},{key:"checkbox",fn:function(t){var i=t.row,r=t.checked;t=t.indeterminate;return[a("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleCheckboxRow(i)}}},[a("span",t?[a("a-checkbox",{attrs:{indeterminate:!0}})]:r?[a("a-checkbox",{attrs:{checked:!0}})]:[a("a-checkbox")],1)])]}}])}),a("vxe-column",{attrs:{field:"aircraftType",title:"机型"}}),a("vxe-column",{attrs:{field:"aircraftPalletType",title:"版型"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._l(e.aircraftPalletTypes,(function(t){return[i.aircraftPalletType==t.code?a("span",{key:t.code},[e._v(e._s(t.name)+" - "+e._s(t.code))]):e._e()]}))]}}])}),a("vxe-column",{attrs:{field:"apLength",title:"长"}}),a("vxe-column",{attrs:{field:"apWidth",title:"宽"}}),a("vxe-column",{attrs:{field:"apHeight",title:"高"}}),a("vxe-column",{attrs:{field:"minWeight",title:"最小重量"}}),a("vxe-column",{attrs:{field:"maxWeight",title:"最大重量"}}),a("vxe-column",{attrs:{field:"minVolume",title:"最小体积"}}),a("vxe-column",{attrs:{field:"maxVolume",title:"最大体积"}}),a("vxe-column",{attrs:{field:"remark",title:"备注"}}),a("vxe-column",{attrs:{field:"status",title:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[0==t.status?a("a-tag",{attrs:{color:"#f5222d"}},[e._v("禁用")]):e._e(),1==t.status?a("a-tag",{attrs:{color:"#1890ff"}},[e._v("启用")]):e._e()]}}])}),a("vxe-column",{attrs:{title:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("a-space",[a("a-tooltip",{attrs:{placement:"top",title:"编辑"}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:aircraftpallet:update",expression:"`api:admin:aircraftpallet:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return e.edit(i)}}})],1),a("a-tooltip",{attrs:{placement:"top",title:"查看图片"}},[a("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:file:getpage",expression:"`api:admin:file:getpage`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"picture"},on:{click:function(t){return e.getFile(i)}}})],1)],1)]}}])})],1),a("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}}),a("a-modal",{attrs:{width:700,visible:e.visible,title:e.title,"confirm-loading":e.confirmLoading,maskClosable:!1,destroyOnClose:!0,"ok-button-props":{props:{disabled:e.disabled}},centered:""},on:{cancel:e.cancel,ok:e.handleOk}},[a("template",{slot:"closeIcon"},[a("a-button",{attrs:{type:"danger",size:"small",shape:"circle",icon:"close-circle"}})],1),a("a-spin",{attrs:{spinning:e.spinning}},[a("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("a-form-model-item",{attrs:{label:"机型",prop:"aircraftType"}},[a("a-select",{model:{value:e.form.aircraftType,callback:function(t){e.$set(e.form,"aircraftType",t)},expression:"form.aircraftType"}},e._l(e.aircraftTypes,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.code}},[e._v(" "+e._s(t.code)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"版型",prop:"aircraftPalletType"}},[a("a-select",{model:{value:e.form.aircraftPalletType,callback:function(t){e.$set(e.form,"aircraftPalletType",t)},expression:"form.aircraftPalletType"}},e._l(e.aircraftPalletTypes,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.code}},[e._v(" "+e._s(t.name)+" - "+e._s(t.code)+" ")])})),1)],1),a("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[a("a-input",{attrs:{"max-length":200},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("a-row",{attrs:{gutter:[10,10]}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"长",prop:"apLength"}},[a("a-input-number",{model:{value:e.form.apLength,callback:function(t){e.$set(e.form,"apLength",t)},expression:"form.apLength"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"宽",prop:"apWidth"}},[a("a-input-number",{model:{value:e.form.apWidth,callback:function(t){e.$set(e.form,"apWidth",t)},expression:"form.apWidth"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"高",prop:"apHeight"}},[a("a-input-number",{model:{value:e.form.apHeight,callback:function(t){e.$set(e.form,"apHeight",t)},expression:"form.apHeight"}})],1)],1)],1),a("a-row",{attrs:{gutter:[10,10]}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"最小重量",prop:"minWeight"}},[a("a-input-number",{model:{value:e.form.minWeight,callback:function(t){e.$set(e.form,"minWeight",t)},expression:"form.minWeight"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"最大重量",prop:"maxWeight"}},[a("a-input-number",{model:{value:e.form.maxWeight,callback:function(t){e.$set(e.form,"maxWeight",t)},expression:"form.maxWeight"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"最小体积",prop:"minVolume"}},[a("a-input-number",{model:{value:e.form.minVolume,callback:function(t){e.$set(e.form,"minVolume",t)},expression:"form.minVolume"}})],1)],1)],1),a("a-row",{attrs:{gutter:[10,10]}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"最大体积",prop:"maxVolume"}},[a("a-input-number",{model:{value:e.form.maxVolume,callback:function(t){e.$set(e.form,"maxVolume",t)},expression:"form.maxVolume"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[a("a-switch",{attrs:{size:"small",checked:0!=e.form.status},on:{click:function(t){e.form.status=0==e.form.status?1:0}}})],1)],1)],1),a("a-upload-dragger",{attrs:{accept:"image/*","file-list":e.fileList,"before-upload":e.beforeUpload,remove:e.handleRemove},on:{change:e.fileChange}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[e._v("单击或拖动文件到此区域进行上传")])])],1)],1)],2),a("a-modal",{attrs:{wrapClassName:"img-modal",width:700,title:e.files.fileName,visible:e.file_visible,maskClosable:!1,destroyOnClose:!0,footer:null,centered:""},on:{cancel:function(t){e.file_visible=!1}}},[a("template",{slot:"closeIcon"},[a("a-button",{attrs:{type:"danger",size:"small",shape:"circle",icon:"close-circle"}})],1),e.files.filePath?a("img",{staticStyle:{"max-width":"100%","max-height":"700px"},attrs:{src:e.file_base+e.files.filePath}}):e._e()],2)],1)}),[],!1,null,"048efeb4",null).exports;t.default=x},"2fc4":function(e,t,a){"use strict";a("4de4"),a("d3b7");var i={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};a=a("2877"),a=Object(a.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[a("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),a("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=a.exports},aa70:function(e,t,a){},dd12:function(e,t,a){"use strict";a("aa70")}}]);