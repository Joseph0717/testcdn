(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3be615b6"],{"05ff":function(e,t,r){"use strict";r("9317")},"2fc4":function(e,t,r){"use strict";r("4de4");var a={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};r=r("2877"),a=Object(r.a)(a,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[r("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?r("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),r("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=a.exports},"6c27":function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"g",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"d",(function(){return y}));t=r("96cf");var a=r("1da1"),n=r("7424"),i=r("b775");function s(e,t,r){return o.apply(this,arguments)}function o(){return(o=Object(a.a)(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSGETPAGE,i.a.POST,{currentPage:t,pageSize:r,dynamicFilter:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSGET,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSCACHELISTASYNC,i.a.GET));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.QUERYPERMISSIONSGETAREAPERMISSIONCOLLISTASYNC,i.a.GET,{aptype:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},9317:function(e,t,r){},d378:function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"b",(function(){return d}));t=r("96cf");var a=r("1da1"),n=r("7424"),i=r("b775");function s(e,t,r){return o.apply(this,arguments)}function o(){return(o=Object(a.a)(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.ROLEGETPAGE,i.a.POST,{currentPage:t,pageSize:r,dynamicFilter:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.ROLEADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.ROLEUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(n.ROLEBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},d55f:function(e,t,r){"use strict";r.r(t),r("a4d3"),r("e01a"),r("4de4"),r("d81d"),r("d3b7"),r("25f0");var a=r("93d6"),n=r("d378"),i=r("309a"),s=r("6c27"),o=r("a701"),c=r("2fc4");c={name:"User",i18n:r("9225"),components:{MySearch:c.a},computed:{fields:function(){return[{value:"userName",label:"账号",type:"string"},{value:"nickName",label:"昵称",type:"string"}]}},data:function(){return{minHeight:window.innerHeight-219,userList:[],userTypes:[],timeZoneList:[],roleList:[],systemTypes:[],organizationList:[],queryPermissionsList:[],areaPermissions:[],loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{},form:{},rules:{userName:[{required:!0,message:"请输入账号",trigger:"change"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"请输入除中文以外的字符!",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{pattern:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$/g,message:"密码必须包含大小写字母和数字,可以使用特殊字符,长度在8-10之间!",trigger:"change"}],nickName:[{required:!0,message:"请输入昵称",trigger:"change"},{pattern:/^[^\u4e00-\u9fa5]+$/,message:"请输入除中文以外的字符!",trigger:"change"}],userType:[{required:!0,message:"请选择用户类型",trigger:"change"}],timeZone:[{required:!0,message:"请选择时区",trigger:"change"}],roleIds:[{required:!0,message:"请选择角色",trigger:"change"}],defaultSystemType:[{required:!0,message:"请选择默认系统类型",trigger:"change"}],orgList:[{required:!0,message:"请选择组织(企业)架构",trigger:"change"}]},title:"",type:"",visible:!1,confirmLoading:!1,spinning:!1,disabled:!1,active:1}},created:function(){this.getUserList(),this.getDictionary()},methods:{getDictionary:function(){var e=this;Object(a.c)().then((function(t){1===t.data.code&&(e.timeZoneList=t.data.data)})),Object(n.c)().then((function(t){1===t.data.code&&(e.roleList=t.data.data.list)})),Object(i.c)().then((function(t){1===t.data.code&&(e.organizationList=t.data.data.list)})),Object(s.f)().then((function(t){1===t.data.code&&(e.queryPermissionsList=t.data.data,e.queryPermissionsList.map((function(e,t){e.key=e.id.toString(),e.title=e.permissionName,e.description="",e.disabled=!1})))})),Object(o.d)(["UserType","SystemType","AreaPermission"]).then((function(t){1===t.data.code&&(t=t.data.data,e.userTypes=t.filter((function(e){return"UserType"===e.code}))[0].data,e.systemTypes=t.filter((function(e){return"SystemType"===e.code}))[0].data,e.areaPermissions=t.filter((function(e){return"AreaPermission"===e.code}))[0].data)}))},getUserList:function(){var e=this;this.loading=!0,Object(a.o)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter).then((function(t){1===t.data.code&&(e.userList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}))},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getUserList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getUserList()},insert:function(){this.title="新增",this.type="add",this.active=1,this.visible=!0,this.form={userName:"",password:"",nickName:"",status:1,remark:"",userType:"",belongCode:"",invitationCode:"",email:"",timeZone:"",roleIds:[],venderCode:"",scacs:[],defaultSystemType:"",orgList:[],queryPermissionsIds:[]}},edit:function(e){var t=this;this.title="编辑",this.type="edit",this.active=1,this.visible=!0,this.disabled=!0,this.spinning=!0,Object(a.l)(e.id).then((function(e){1===e.data.code&&(t.form=e.data.data,t.form.queryPermissionsIds&&0<t.form.queryPermissionsIds.length?t.form.queryPermissionsIds=t.form.queryPermissionsIds.map((function(e){return e.toString()})):t.form.queryPermissionsIds=[],t.disabled=!1,t.spinning=!1)}))},handleOk:function(){var e=this;this.$refs.form.validate((function(t){t?(e.confirmLoading=!0,"add"==e.type?Object(a.g)(e.form).then((function(t){1===t.data.code?(e.confirmLoading=!1,e.visible=!1,e.$message.success("保存成功!"),e.getUserList()):(e.confirmLoading=!1,e.$message.error(t.data.msg))})).catch((function(t){e.confirmLoading=!1,e.$message.error("系统内部错误!")})):Object(a.k)(e.form).then((function(t){1===t.data.code?(e.confirmLoading=!1,e.visible=!1,e.$message.success("保存成功!"),e.getUserList()):(e.confirmLoading=!1,e.$message.error(t.data.msg))})).catch((function(t){e.confirmLoading=!1,e.$message.error("系统内部错误!")}))):e.active=1}))},batchDelete:function(e){var t=this;Object(a.j)(e.id).then((function(e){1===e.data.code&&t.getUserList()}))},handleChange:function(e,t,r){this.form.queryPermissionsIds=e}}},r("05ff"),r=r("2877"),c=Object(r.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"User"},[r("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:e._u([{key:"tools",fn:function(){return[r("a-space",[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:user:add",expression:"`api:admin:user:add`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"plus-circle"},on:{click:e.insert}},[e._v(e._s(e.$t("37")))]),r("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),r("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:e.userList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight}},[r("vxe-column",{attrs:{type:"checkbox",width:"50"},scopedSlots:e._u([{key:"header",fn:function(t){var a=t.checked;t=t.indeterminate;return[r("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleAllCheckboxRow()}}},[r("span",t?[r("a-checkbox",{attrs:{indeterminate:!0}})]:a?[r("a-checkbox",{attrs:{checked:!0}})]:[r("a-checkbox")],1)])]}},{key:"checkbox",fn:function(t){var a=t.row,n=t.checked;t=t.indeterminate;return[r("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleCheckboxRow(a)}}},[r("span",t?[r("a-checkbox",{attrs:{indeterminate:!0}})]:n?[r("a-checkbox",{attrs:{checked:!0}})]:[r("a-checkbox")],1)])]}}])}),r("vxe-column",{attrs:{field:"userName",title:"账号"}}),r("vxe-column",{attrs:{field:"nickName",title:"昵称"}}),r("vxe-column",{attrs:{field:"userType",title:"用户类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._l(e.userTypes,(function(t){return[t.value==a.userType?r("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),r("vxe-column",{attrs:{field:"roleNames",title:"角色"}}),r("vxe-column",{attrs:{field:"defaultSystemType",title:"默认系统类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._l(e.systemTypes,(function(t){return[t.value==a.defaultSystemType?r("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),r("vxe-column",{attrs:{field:"status",title:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[0==t.status?r("a-tag",{attrs:{color:"#f5222d"}},[e._v("禁用")]):e._e(),1==t.status?r("a-tag",{attrs:{color:"#1890ff"}},[e._v("启用")]):e._e()]}}])}),r("vxe-column",{attrs:{field:"remark",title:"备注"}}),r("vxe-column",{attrs:{width:"100",fixed:"right",title:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("a-space",[r("a-tooltip",{attrs:{placement:"top",title:"编辑"}},[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:user:update",expression:"`api:admin:user:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return e.edit(a)}}})],1),r("a-popconfirm",{attrs:{title:e.$t("47")},on:{confirm:function(t){return e.batchDelete(a)}}},[r("a-tooltip",{attrs:{placement:"top",title:e.$t("46")}},[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:user:softdelete",expression:"`api:admin:user:softdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1)],1)]}}])})],1),r("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}}),r("a-modal",{attrs:{width:700,visible:e.visible,title:e.title,"confirm-loading":e.confirmLoading,maskClosable:!1,destroyOnClose:!0,"ok-button-props":{props:{disabled:e.disabled}},centered:""},on:{cancel:function(t){e.visible=!1},ok:e.handleOk}},[r("template",{slot:"closeIcon"},[r("a-button",{attrs:{type:"danger",size:"small",shape:"circle",icon:"close-circle"}})],1),r("a-spin",{attrs:{spinning:e.spinning}},[r("a-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("a-tab-pane",{key:1,attrs:{tab:"基本信息",forceRender:""}},[r("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("a-form-model-item",{attrs:{label:"账号",prop:"userName"}},[r("a-input",{attrs:{"max-length":20},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),"add"==e.type?r("a-form-model-item",{attrs:{label:"密码",prop:"password"}},[r("a-input",{attrs:{"max-length":20},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),r("a-form-model-item",{attrs:{label:"昵称",prop:"nickName"}},[r("a-input",{attrs:{"max-length":20},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}})],1),r("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[r("a-switch",{attrs:{size:"small",checked:0!==e.form.status},on:{click:function(t){e.form.status=0===e.form.status?1:0}}})],1),r("a-form-model-item",{attrs:{label:"用户类型",prop:"userType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.userType,callback:function(t){e.$set(e.form,"userType",t)},expression:"form.userType"}},e._l(e.userTypes,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),r("a-form-model-item",{attrs:{label:"邮箱",prop:"email"}},[r("a-input",{attrs:{"max-length":30},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("a-form-model-item",{attrs:{label:"时区",prop:"timeZone"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.timeZone,callback:function(t){e.$set(e.form,"timeZone",t)},expression:"form.timeZone"}},e._l(e.timeZoneList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.zoneName,value:e.zoneid}})})),1)],1),r("a-form-model-item",{attrs:{label:"角色",prop:"roleIds"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"",filterable:"",placeholder:""},model:{value:e.form.roleIds,callback:function(t){e.$set(e.form,"roleIds",t)},expression:"form.roleIds"}},e._l(e.roleList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r("a-form-model-item",{attrs:{label:"默认系统类型",prop:"defaultSystemType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.defaultSystemType,callback:function(t){e.$set(e.form,"defaultSystemType",t)},expression:"form.defaultSystemType"}},e._l(e.systemTypes,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1),r("a-form-model-item",{attrs:{label:"组织(企业)架构",prop:"orgList"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",multiple:"",filterable:"",placeholder:""},model:{value:e.form.orgList,callback:function(t){e.$set(e.form,"orgList",t)},expression:"form.orgList"}},e._l(e.organizationList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.orgName,value:e.id.toString()}})})),1)],1),r("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[r("a-input",{attrs:{"max-length":200},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1),r("a-tab-pane",{key:2,attrs:{tab:"数据权限",forceRender:""}},[r("a-transfer",{attrs:{"data-source":e.queryPermissionsList,titles:["未选","已选"],"target-keys":e.form.queryPermissionsIds,render:function(t){return t.title+" - "+e.areaPermissions.filter((function(e){return e.value==t.areaPermission}))[0].name}},on:{change:e.handleChange}})],1)],1)],1)],2)],1)}),[],!1,null,"4774cd0e",null);t.default=c.exports}}]);