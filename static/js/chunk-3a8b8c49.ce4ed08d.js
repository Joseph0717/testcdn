(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3a8b8c49"],{"2fc4":function(e,t,a){"use strict";a("4de4"),a("d3b7");var s={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};a=a("2877"),a=Object(a.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[a("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),a("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=a.exports},7918:function(e,t,a){"use strict";a("d702")},bd84:function(e,t,a){"use strict";a.r(t),a("4e82");var s=a("5648"),i=a("a701"),n=a("672c"),l=a("2fc4");n={name:"ReadMessage",i18n:a("9225"),components:{AdvanceTable:n.a,MySearch:l.a},computed:{columns:function(){return[{title:this.$t("236"),dataIndex:"title",scopedSlots:{customRender:"title"}},{title:this.$t("237"),dataIndex:"publishBy",scopedSlots:{customRender:"publishBy"}},{title:this.$t("238"),dataIndex:"publishTime",scopedSlots:{customRender:"publishTime"}},{title:this.$t("34"),dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:this.$t("35"),dataIndex:"status",scopedSlots:{customRender:"status"},width:60},{title:this.$t("36"),dataIndex:"linkUrl",scopedSlots:{customRender:"linkUrl"}}]},fields:function(){return[{value:"title",label:this.$t("236"),type:"string",default:!0},{value:"publishBy",label:this.$t("237"),type:"string"}]}},data:function(){return{minHeight:window.innerHeight-200,messageClass:[],messageList:[],loading:!1,pagination:{current:1,pageSize:20,total:0,pageSizeOptions:["10","20","30","40","50"]},dynamicFilter:{},mclass:{field:"isDeleted",label:"isDeleted",operator:"Equal",value:0},selectedRowKeys:[],deleteLoading:!1,current:0}},created:function(){this.getMessageClass(),this.getMessage()},methods:{getMessageClass:function(){var e=this;Object(i.c)("MessageClass").then((function(t){1===t.data.code&&(e.messageClass=t.data.data,e.messageClass.sort(e.compare("value",!0)))}))},getMessage:function(){var e=this;this.loading=!0,this.dynamicFilter=this.dynamicFilter||{},this.dynamicFilter.filters||this.$set(this.dynamicFilter,"filters",[]),this.dynamicFilter.filters.push({field:"status",label:"status",operator:"Equal",value:1},this.mclass),Object(s.c)(this.pagination.current,this.pagination.pageSize,this.dynamicFilter).then((function(t){1===t.data.code&&(e.messageList=t.data.data.list,e.pagination.total=t.data.data.total,e.loading=!1)}))},handelPage:function(e){this.pagination.current=e,this.getMessage()},onShowSizeChange:function(e,t){this.pagination.current=1,this.pagination.pageSize=t,this.getMessage()},onSearch:function(e){this.dynamicFilter=e,this.pagination.current=1,this.getMessage()},go:function(e){this.$router.push("/MessageInfo?id=".concat(e.id))},onSelectChange:function(e){this.selectedRowKeys=e},batchDelete:function(){var e=this;if(0==this.selectedRowKeys.length)return!1;this.deleteLoading=!0,Object(s.a)(this.selectedRowKeys).then((function(t){1===t.data.code&&(e.selectedRowKeys=[],e.deleteLoading=!1,e.getMessage())}))},onTap:function(e){this.current=e,this.dynamicFilter={},this.selectedRowKeys=[],this.mclass=0==e?{field:"isDeleted",label:"isDeleted",operator:"Equal",value:this.current}:{field:"messageClass",label:"messageClass",operator:"Equal",value:this.current},this.getMessage()},compare:function(e,t){return function(a,s){return a=a[e],s=s[e],1==t?a-s:s-a}}}},a("7918"),l=a("2877"),a=Object(l.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ReadMessage"},[a("a-page-header",[a("template",{slot:"title"},[a("a-space",[a("a-button",{attrs:{type:"danger",shape:"circle",icon:"delete",loading:e.deleteLoading,disabled:0==this.selectedRowKeys.length},on:{click:e.batchDelete}}),a("a-button-group",e._l(e.messageClass,(function(t,s){return a("a-button",{key:s,attrs:{type:e.current==Number(t.value)?"primary":""},on:{click:function(a){e.onTap(Number(t.value))}}},[e._v(e._s(t.name))])})),1)],1)],1),a("template",{slot:"extra"},[a("a-space",[a("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)],1)],2),a("advance-table",{style:"minHeight:"+e.minHeight+"px;",attrs:{title:" ",scroll:{y:e.minHeight-120},columns:e.columns,"data-source":e.messageList,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},pagination:!1,loading:e.loading,rowKey:"id",bordered:"",size:"small"},scopedSlots:e._u([{key:"status",fn:function(t){return a("span",{},[0==t.record.status?a("a-tag",{attrs:{color:"#f5222d"}},[e._v(e._s(e.$t("234")))]):e._e(),1==t.record.status?a("a-tag",{attrs:{color:"#108ee9"}},[e._v(e._s(e.$t("235")))]):e._e()],1)}},{key:"linkUrl",fn:function(t){return a("span",{},[a("a-tooltip",{attrs:{placement:"top",title:e.$t("113")}},[a("a-button",{attrs:{type:"primary",size:"small",icon:"eye"},on:{click:function(a){return e.go(t.record)}}})],1)],1)}}])},[a("template",{slot:"page"},[a("a-pagination",{attrs:{current:e.pagination.current,total:e.pagination.total,"page-size":e.pagination.pageSize,"page-size-options":e.pagination.pageSizeOptions,"show-total":function(t){return""+e.$t("48")+e.pagination.total+e.$t("49")},"show-size-changer":"",showLessItems:"",size:"small"},on:{"update:pageSize":function(t){return e.$set(e.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pageSize",t)},change:e.handelPage,showSizeChange:e.onShowSizeChange},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return[a("span",[e._v(e._s(t.value)+" "+e._s(e.$t("50")))])]}}])})],1)],2)],1)}),[],!1,null,"55085daf",null).exports;t.default=a},d702:function(e,t,a){}}]);