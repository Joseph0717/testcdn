(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4786ce24"],{"2dbc":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return h}));var a=n("1da1"),r=(n("96cf"),n("7424")),i=n("b775");function o(t){return s.apply(this,arguments)}function s(){return(s=Object(a.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(r.APIGETLIST,i.a.GET,{key:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(t){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(r.APIGET,i.a.GET,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(t){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(r.APIUPDATE,i.a.PUT,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(t){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(r.APIADD,i.a.POST,e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return m.apply(this,arguments)}function m(){return(m=Object(a.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(i.e)(r.APISOFTDELETE,i.a.DELETE,{id:e}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},"6b49":function(t,e,n){"use strict";n("f383")},e339:function(t,e,n){"use strict";n.r(e),n("4de4"),n("d3b7");var a=n("2dbc"),r=n("ca00"),i=n("2ef0"),o=n.n(i),s=(i=(n("d9e2"),n("d81d"),n("a4d3"),n("e01a"),{i18n:n("9225"),props:{apiList:{type:Array,default:function(){return[]}},parentList:{type:Array,default:function(){return[]}}},data:function(){var t=this;return{form:{},rules:{parent:[{validator:function(e,n,a){0==t.parentIds.length?a(new Error(t.$t("333"))):a()},trigger:"change",required:!0}],label:[{required:!0,message:this.$t("334"),trigger:"change"}],path:[{required:!0,message:this.$t("335"),trigger:"change"}]},title:"",type:"",visible:!1,confirmLoading:!1,spinning:!1,disabled:!1,httpMethods:["get","put","post","patch","delete"],parentIds:[]}},methods:{cascaderChange:function(t){this.form.parentId=t[t.length-1],this.parentIds=t},radioChange:function(t){this.form.httpMethods=t.target.value},open:function(t,e){var n=this;1==t?(this.title=this.$t("37"),this.type="add",this.form={},this.parentIds=[],this.form={parentId:0,label:"",path:"",httpMethods:null,enabled:!0,description:""},this.visible=!0):2==t&&(this.title=this.$t("78"),this.type="edit",this.form={},this.visible=!0,this.spinning=!0,this.disabled=!0,Object(a.b)(e.id).then((function(t){var e;1===t.data.code&&(t=t.data.data,e=Object(r.c)(n.apiList,t.id),n.parentIds=e.map((function(t){return t.id})),n.parentIds.unshift(0),n.form={parentId:n.parentIds[n.parentIds.length-1],label:t.label,path:t.path,httpMethods:t.httpMethods,enabled:t.enabled,description:t.description,id:t.id,version:0},n.spinning=!1,n.disabled=!1)})))},handelOk:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.confirmLoading=!0,"edit"==t.type?Object(a.e)(t.form).then((function(e){1===e.data.code?(t.confirmLoading=!1,t.visible=!1,t.$parent.getApiList()):(t.confirmLoading=!1,t.$message.error(e.data.msg))})):Object(a.a)(t.form).then((function(e){1===e.data.code?(t.confirmLoading=!1,t.visible=!1,t.$parent.getApiList()):(t.confirmLoading=!1,t.$message.error(e.data.msg))})))}))},handelCancel:function(){this.visible=!1,this.confirmLoading=!1}}}),n("2877"));i=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-modal",{attrs:{destroyOnClose:!0,title:t.title,centered:"",visible:t.visible,"confirm-loading":t.confirmLoading,maskClosable:!1,"ok-button-props":{props:{disabled:t.disabled}}},on:{ok:t.handelOk,cancel:t.handelCancel}},[n("template",{slot:"closeIcon"},[n("a-button",{attrs:{type:"danger",size:"small",shape:"circle",icon:"close-circle"}})],1),n("a-spin",{attrs:{spinning:t.spinning}},[n("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-col":{span:4},"wrapper-col":{span:20}}},[n("a-form-model-item",{attrs:{label:t.$t("329"),prop:"parent"}},[n("a-cascader",{attrs:{"field-names":{label:"label",value:"id",children:"children"},options:t.parentList,value:t.parentIds,placeholder:"Please select","change-on-select":""},on:{change:t.cascaderChange}})],1),n("a-form-model-item",{attrs:{label:t.$t("330"),prop:"label"}},[n("a-input",{model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),n("a-form-model-item",{attrs:{label:t.$t("331"),prop:"path"}},[n("a-input",{on:{change:function(e){t.form.path=t.form.path.replace(/\s+/g,"")}},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1),n("a-form-model-item",{attrs:{label:t.$t("332")}},[n("a-radio-group",{attrs:{value:t.form.httpMethods,"button-style":"solid"},on:{change:t.radioChange}},t._l(t.httpMethods,(function(e,a){return n("a-radio-button",{key:a,attrs:{value:e}},[t._v(" "+t._s(e)+" ")])})),1)],1),n("a-form-model-item",{attrs:{label:t.$t("35")}},[n("a-switch",{attrs:{checked:t.form.enabled,size:"small"},on:{click:function(e){t.form.enabled=!t.form.enabled}}})],1),n("a-form-model-item",{attrs:{label:t.$t("325")}},[n("a-input",{model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)],2)],1)}),[],!1,null,null,null).exports,i={name:"Interface",i18n:n("9225"),components:{Modal:i},computed:{columns:function(){return[{title:this.$t("330"),dataIndex:"label",scopedSlots:{customRender:"label"}},{title:this.$t("331"),dataIndex:"path",scopedSlots:{customRender:"path"}},{title:this.$t("35"),dataIndex:"enabled",scopedSlots:{customRender:"enabled"}},{title:this.$t("36"),scopedSlots:{customRender:"operation"},width:200}]}},data:function(){return{minHeight:window.innerHeight-210,apiList:[],parentList:[],loading:!1}},created:function(){this.getApiList()},methods:{getApiList:function(t){var e=this;this.loading=!0,Object(a.c)(t).then((function(t){1===t.data.code&&(e.apiList=Object(r.g)(o.a.cloneDeep(t.data.data)),t=t.data.data.filter((function(t){return 0==t.parentId})),e.parentList=Object(r.g)(t,{id:0,parentId:0,label:e.$t("336")}),e.loading=!1)}))},onSearch:function(t){this.getApiList(t)},showModalAdd:function(){this.$refs.Modal.open(1)},showModalEdit:function(t){this.$refs.Modal.open(2,t)},confirmDelete:function(t){var e=this;this.loading=!0,Object(a.d)(t.id).then((function(t){1===t.data.code&&e.getApiList()}))}}},n("6b49"),n=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Interface"},[n("a-page-header",[n("template",{slot:"extra"},[n("a-space",[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:api:add",expression:"`api:admin:api:add`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"plus-circle"},on:{click:t.showModalAdd}},[t._v(t._s(t.$t("37")))]),n("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("67"),"enter-button":""},on:{search:t.onSearch}})],1)],1)],2),n("a-table",{style:"minHeight:"+t.minHeight+"px;",attrs:{columns:t.columns,scroll:{y:t.minHeight-40},"data-source":t.apiList,loading:t.loading,pagination:!1,rowKey:"id",bordered:"",size:"small"},scopedSlots:t._u([{key:"enabled",fn:function(e){return n("span",{},[n("a-tag",{attrs:{color:e?"#108ee9":"#f50"}},[t._v(" "+t._s(e?t.$t("200"):t.$t("201"))+" ")])],1)}},{key:"operation",fn:function(e){return n("span",{},[n("a-space",[n("a-tooltip",{attrs:{placement:"top",title:t.$t("78")}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:api:update",expression:"`api:admin:api:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(n){return t.showModalEdit(e)}}})],1),n("a-popconfirm",{attrs:{title:t.$t("47")},on:{confirm:function(n){return t.confirmDelete(e)}}},[n("a-tooltip",{attrs:{placement:"top",title:t.$t("46")}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:api:softdelete",expression:"`api:admin:api:softdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1)],1)],1)}}])}),n("Modal",{ref:"Modal",attrs:{apiList:t.apiList,parentList:t.parentList}})],1)}),[],!1,null,"0cac9413",null).exports;e.default=n},f383:function(t,e,n){}}]);