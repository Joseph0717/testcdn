(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6cb3f4ba"],{"2fc4":function(e,t,n){"use strict";n("4de4");var r={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};n=n("2877"),r=Object(n.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[n("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),n("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=r.exports},"48fd":function(e,t,n){},"914d":function(e,t,n){"use strict";n.r(t),n("4de4"),n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d");var r=n("fb04"),a=n("a701"),i=n("cdc0"),u=n("2fc4"),c=n("c32d"),o=n.n(c),s=(c=n("cebe"),n.n(c));o={name:"Billing",i18n:n("9225"),components:{MySearch:u.a},computed:{fields:function(){return[{value:"billingNO",label:"账单号",type:"string"},{value:"billingMonth",label:"账单月",type:"string"},{value:"billingDate",label:"账单日期",type:"string"}]}},data:function(){return{minHeight:window.innerHeight-219,menuID:this.$route.meta.id,billingList:[],settlementpeopleList:[],ARAPs:[],loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{},selectMenuList:[]}},created:function(){this.getBillingList(),this.getDictionary(),615!=this.menuID&&0xe2f63c1f8045!=this.menuID||this.getSelectMenu()},methods:{moment:o.a,getDictionary:function(){var e=this;Object(i.f)(["Settlementpeople"]).then((function(t){1===t.data.code&&(t=t.data.data,e.settlementpeopleList=t.filter((function(e){return"Settlementpeople"===e.corporationtype}))[0].data)})),Object(a.d)(["ARAP"]).then((function(t){1===t.data.code&&(t=t.data.data,e.ARAPs=t.filter((function(e){return"ARAP"===e.code}))[0].data)}))},getBillingList:function(){var e=this;switch(this.loading=!0,this.menuID){case 614:Object(r.k)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(t){1===t.data.code&&(e.billingList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}));break;case 615:Object(r.i)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(t){1===t.data.code&&(e.billingList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}));break;case 616:Object(r.j)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(t){1===t.data.code&&(e.billingList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}));break;case 0xe2f63c1f8045:Object(r.h)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,{}).then((function(t){1===t.data.code&&(e.billingList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}))}},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getBillingList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getBillingList()},insert:function(){this.$router.push({path:"/EditBilling",query:{id:0,type:1,menuID:this.menuID}})},update:function(e){this.$router.push({path:"/EditBilling",query:{id:e.id,type:2}})},remove:function(e){var t=this;Object(r.l)(e.id).then((function(e){1===e.data.code&&t.getBillingList()}))},review:function(e){this.$router.push({path:"/ReviewBilling",query:{id:e.id}})},changeStatus:function(e){var t=this,n=this.$refs.xTable.getCheckboxRecords().map((function(e){return{id:e.id}}));0!=n.length?(e={idlist:n,status:e},Object(r.c)(e).then((function(e){1===e.data.code?(t.$message.success("操作成功!"),t.getBillingList()):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error("系统内部错误!")}))):this.$message.error("请选择账单!")},getSelectMenu:function(){var e=this;Object(r.g)().then((function(t){1===t.data.code&&(e.selectMenuList=t.data.data)}))},handleMenuClick:function(e,t){var n=this;s.a.defaults.timeout="",s.a.defaults.responseType="blob",Object(r.e)(t.id,e.key).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data]));e=document.createElement("a");e.style.display="none",e.href=t,e.setAttribute("download","download.xlsx"),document.body.appendChild(e),e.click(),s.a.defaults.timeout=5e3,s.a.defaults.responseType=""})).catch((function(e){s.a.defaults.timeout=5e3,s.a.defaults.responseType="",n.$message.error("系统内部错误!")}))}}},n("9619b"),n=n("2877"),o=Object(n.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"Billing"},[n("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:e._u([{key:"tools",fn:function(){return[n("a-space",[614==e.menuID||616==e.menuID?n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:add",expression:"`api:admin:billing:add`",arg:"permission"}],attrs:{type:"primary",icon:"plus-circle"},on:{click:e.insert}},[e._v("新增")]):e._e(),614==e.menuID||616==e.menuID?n("a-popconfirm",{attrs:{title:"确认通过吗?"},on:{confirm:function(t){return e.changeStatus(1)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:chengebillingstatusasync",expression:"`api:admin:billing:chengebillingstatusasync`",arg:"permission"}],attrs:{type:"primary",icon:"check-circle"}},[e._v("审核")])],1):e._e(),615==e.menuID||0xe2f63c1f8045==e.menuID?n("a-popconfirm",{attrs:{title:"确认驳回吗?"},on:{confirm:function(t){return e.changeStatus(0)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:chengebillingstatusasync",expression:"`api:admin:billing:chengebillingstatusasync`",arg:"permission"}],attrs:{type:"danger",icon:"rollback"}},[e._v("驳回")])],1):e._e(),n("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),n("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:e.billingList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight}},[n("vxe-column",{attrs:{type:"checkbox",width:"50",fixed:"left"},scopedSlots:e._u([{key:"header",fn:function(t){var r=t.checked;t=t.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleAllCheckboxRow()}}},[n("span",t?[n("a-checkbox",{attrs:{indeterminate:!0}})]:r?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}},{key:"checkbox",fn:function(t){var r=t.row,a=t.checked;t=t.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleCheckboxRow(r)}}},[n("span",t?[n("a-checkbox",{attrs:{indeterminate:!0}})]:a?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}}])}),n("vxe-column",{attrs:{field:"billingNO",title:"账单号"}}),n("vxe-column",{attrs:{field:"billingMonth",title:"账单月"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.billingMonth?e.moment(t.billingMonth).format("YYYY-MM"):"")+" ")]}}])}),n("vxe-column",{attrs:{field:"billingDate",title:"账单日期"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[e._v(" "+e._s(t.billingDate?e.moment(t.billingDate).format("YYYY-MM-DD"):"")+" ")]}}])}),n("vxe-column",{attrs:{field:"billingType",title:"账单类型"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.ARAPs,(function(t){return[t.value==r.billingType?n("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"partnerCode",title:"结算对象"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(e.settlementpeopleList,(function(t){return[t.corporationCode==r.partnerCode?n("span",{key:t.corporationCode},[e._v(e._s(t.corporationName))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{title:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("a-space",[614==e.menuID||616==e.menuID?n("a-tooltip",{attrs:{placement:"top",title:"编辑"}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:update",expression:"`api:admin:billing:update`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"edit"},on:{click:function(t){return e.update(r)}}})],1):e._e(),614==e.menuID||616==e.menuID?n("a-tooltip",{attrs:{placement:"top",title:"删除"}},[n("a-popconfirm",{attrs:{title:"确认删除吗?"},on:{confirm:function(t){return e.remove(r)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:softdelete",expression:"`api:admin:billing:softdelete`",arg:"permission"}],attrs:{type:"danger",size:"small",icon:"delete"}})],1)],1):e._e(),615==e.menuID||0xe2f63c1f8045==e.menuID?n("a-tooltip",{attrs:{placement:"top",title:"查看账单"}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:getbillingdetailasync",expression:"`api:admin:billing:getbillingdetailasync`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"eye"},on:{click:function(t){return e.review(r)}}})],1):e._e(),615==e.menuID||0xe2f63c1f8045==e.menuID?n("a-tooltip",{attrs:{placement:"top",title:"导出"}},[n("a-dropdown",{attrs:{type:"primary",size:"small",placement:"bottomCenter"}},[n("a-button",{attrs:{type:"primary",size:"small",icon:"export"}}),n("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.handleMenuClick(t,r)}},slot:"overlay"},e._l(e.selectMenuList,(function(t){return n("a-menu-item",{key:t.code},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:billing:downbillingasync",expression:"`api:admin:billing:downbillingasync`",arg:"permission"}],attrs:{type:"primary",block:""}},[e._v(e._s(t.name))])],1)})),1)],1)],1):e._e()],1)]}}])})],1),n("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)}),[],!1,null,"06f4d682",null).exports;t.default=o},"9619b":function(e,t,n){"use strict";n("48fd")},cdc0:function(e,t,n){"use strict";n.d(t,"h",(function(){return u})),n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"j",(function(){return y})),n.d(t,"d",(function(){return v})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return T}));t=n("96cf");var r=n("1da1"),a=n("7424"),i=n("b775");function u(e,t,n,r){return c.apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,u){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGETPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGET,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONADDCONTACT,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONUPDATECONTACT,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONBATCHSOFTDELETECONTACT,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGETHEDERANDDETAILASYNC,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.CORPORATIONGETCACHECORPORATIONBYTYPE,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},fb04:function(e,t,n){"use strict";n.d(t,"k",(function(){return u})),n.d(t,"i",(function(){return o})),n.d(t,"j",(function(){return l})),n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return y})),n.d(t,"f",(function(){return v})),n.d(t,"b",(function(){return w})),n.d(t,"d",(function(){return T})),n.d(t,"c",(function(){return I})),n.d(t,"e",(function(){return E})),n.d(t,"g",(function(){return j}));t=n("96cf");var r=n("1da1"),a=n("7424"),i=n("b775");function u(e,t,n,r){return c.apply(this,arguments)}function c(){return(c=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,u){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGGETUNCHECKEDARPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e,t,n,r){return s.apply(this,arguments)}function s(){return(s=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,u){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGGETCHECKEDARPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,n,r){return p.apply(this,arguments)}function p(){return(p=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,u){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGGETUNCHECKEDAPPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n,r){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,u){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGGETCHECKEDAPPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:r,filter:u}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return b.apply(this,arguments)}function b(){return(b=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return O.apply(this,arguments)}function O(){return(O=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGSOFTDELETE,i.a.DELETE,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return R.apply(this,arguments)}function R(){return(R=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGGETBILLINGDETAILASYNC,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGADDCHARGELINE,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return x.apply(this,arguments)}function x(){return(x=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGDELCHARGELINE,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return P.apply(this,arguments)}function P(){return(P=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGCHENGEBILLINGSTATUSASYNC,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t){return L.apply(this,arguments)}function L(){return(L=Object(r.a)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGDOWNBILLINGASYNC,i.a.GET,{id:t,exporttype:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return S.apply(this,arguments)}function S(){return(S=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(a.BILLINGGETBILLINGSELECTMENUASYNC,i.a.GET));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);