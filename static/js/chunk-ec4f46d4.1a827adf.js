(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ec4f46d4"],{"2fc4":function(e,t,n){"use strict";n("4de4");var a={name:"MySearch",props:{fields:{type:Array,default:function(){return[]}}},data:function(){return{filter:{field:"",value:"",operator:"Contains"}}},created:function(){this.filter.field=this.fields[0].value},methods:{change:function(e){this.filter.field=e},onSearch:function(e){this.filter.value=e,e=this.filter,this.$emit("click",e)}}};n=n("2877"),a=Object(n.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-input-search",{attrs:{allowClear:""},on:{search:e.onSearch}},[n("a-select",{staticStyle:{"min-width":"100px"},attrs:{slot:"addonBefore"},on:{change:e.change},slot:"addonBefore",model:{value:e.filter.field,callback:function(t){e.$set(e.filter,"field",t)},expression:"filter.field"}},[e._l(e.fields,(function(t){return["string"==t.type?n("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")]):e._e()]}))],2),n("a-button",{attrs:{slot:"enterButton",icon:"search"},slot:"enterButton"})],1)],1)}),[],!1,null,null,null);t.a=a.exports},"35f13":function(e,t,n){"use strict";n.r(t),n("99af"),n("4de4"),n("d81d"),n("d3b7");var a=n("5530"),r=n("597e"),i=n("91f0"),o=n("cdc0"),s=n("9056"),u=n("a701"),c=n("2fc4"),l=n("5880"),p=n("c32d"),f=n.n(p),d=(p=n("2ef0"),n.n(p));p=n("a6ea"),f={name:"SeaHawb",i18n:n("9225"),components:{MySearch:c.a,ExpendTable:p.a},computed:Object(a.a)(Object(a.a)({},Object(l.mapGetters)("account",["user"])),{},{fields:function(){return[{value:"orderNo",label:"业务编号",type:"string"},{value:"hawb",label:"分单号",type:"string"},{value:"mawb",label:"主单号",type:"string"}]}}),data:function(){return{minHeight:window.innerHeight-219,menuID:this.$route.meta.id,hAirwayBillList:[],consignorList:[],settlementpeopleList:[],tradeClauses:[],costMainStatuss:[],taskTypes:[],chargeList:[],loading:!1,pagination:{currentPage:1,pageSize:100,totalResult:0},dynamicFilter:{},filter:{}}},created:function(){this.getDictionary(),this.getHAirwayBillList()},methods:{moment:f.a,getDictionary:function(){var e=this;Object(s.c)().then((function(t){1===t.data.code&&(e.chargeList=t.data.data)})),Object(o.f)(["Consignor","Settlementpeople"]).then((function(t){1===t.data.code&&(t=t.data.data,e.consignorList=t.filter((function(e){return"Consignor"===e.corporationtype}))[0].data,e.settlementpeopleList=t.filter((function(e){return"Settlementpeople"===e.corporationtype}))[0].data)})),Object(u.d)(["TradeClause","CostMainStatus","TaskType"]).then((function(t){1===t.data.code&&(t=t.data.data,e.tradeClauses=t.filter((function(e){return"TradeClause"===e.code}))[0].data,e.costMainStatuss=t.filter((function(e){return"CostMainStatus"===e.code}))[0].data,e.taskTypes=t.filter((function(e){return"TaskType"===e.code}))[0].data)}))},getHAirwayBillList:function(){var e=this;switch(this.loading=!0,this.menuID){case 0xebaae1200045:this.filter={costStatus:2};break;case 0xebab2eed0045:this.filter={costStatus:3}}Object(r.b)(this.pagination.currentPage,this.pagination.pageSize,this.dynamicFilter,this.filter).then((function(t){1===t.data.code&&(e.hAirwayBillList=t.data.data.list,e.pagination.totalResult=t.data.data.total,e.loading=!1)}))},loadContentMethod:function(e){var t=e.row;return new Promise((function(e){Object(i.e)(t.id).then((function(n){var a,r;1===n.data.code&&(t.arlist=n.data.data.arlist,t.aplist=n.data.data.aplist,r=a=0,t.arlist&&t.arlist.map((function(e){a+=e.chargeAmount})),t.aplist&&t.aplist.map((function(e){r+=e.chargeAmount})),t.arCount=a,t.apCount=r,t.headCount=t.arCount-t.apCount,e())}))}))},handlePageChange:function(e){var t=e.currentPage;e=e.pageSize;this.pagination.currentPage=t,this.pagination.pageSize=e,this.getHAirwayBillList()},onSearch:function(e){this.dynamicFilter=e,this.pagination.currentPage=1,this.getHAirwayBillList()},review:function(e){"1004"==e.bussinessType&&this.$router.push({path:"/ReviewSeaHawbExport",query:{id:e.id,menuID:this.menuID}}),"1003"==e.bussinessType&&this.$router.push({path:"/ReviewSeaHawbImport",query:{id:e.id,menuID:this.menuID}})},changeStatus:function(e){var t=this,n=this.$refs.xTable.getCheckboxRecords().map((function(e){return e.id}));0!=n.length?(e={idlist:n,chargeStatus:e},Object(r.k)(e).then((function(e){1===e.data.code?(t.$message.success("操作成功!"),t.getHAirwayBillList()):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error("系统内部错误!")}))):this.$message.error("请选择订单!")},changeChargeLineStatus:function(e){var t=this,n=this.$refs.xTable.getRowExpandRecords(),a=[],r=[];n.map((function(e){t.$refs["expend"+e.id].getxTableAR().getCheckboxRecords().map((function(e){a.push(e.id)})),t.$refs["expend"+e.id].getxTableAP().getCheckboxRecords().map((function(e){r.push(e.id)}))})),n=d.a.concat(a,r),0!=n.length?(e={iDlist:n,chargeStatus:e},Object(i.h)(e).then((function(e){1===e.data.code?(t.$message.success("操作成功!"),t.getHAirwayBillList()):t.$message.error(e.data.msg)})).catch((function(e){t.$message.error("系统内部错误!")}))):this.$message.error("请选择费用!")}}},n("6f9b"),n=n("2877"),f=Object(n.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"SeaHawb"},[n("vxe-toolbar",{attrs:{custom:"",print:""},scopedSlots:e._u([{key:"tools",fn:function(){return[n("a-space",[e.loading||0xebaae1200045!=e.menuID?e._e():n("a-popconfirm",{attrs:{title:"确认通过吗?"},on:{confirm:function(t){return e.changeStatus(3)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:seahairwaybillexport:hawbchangechargestatus",expression:"`api:admin:seahairwaybillexport:hawbchangechargestatus`",arg:"permission"}],attrs:{type:"primary"}},[e._v("订单通过")])],1),e.loading||0xebaae1200045!=e.menuID?e._e():n("a-popconfirm",{attrs:{title:"确认驳回吗?"},on:{confirm:function(t){return e.changeStatus(1)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:seahairwaybillexport:hawbchangechargestatus",expression:"`api:admin:seahairwaybillexport:hawbchangechargestatus`",arg:"permission"}],attrs:{type:"danger"}},[e._v("订单驳回")])],1),e.loading||0xebaae1200045!=e.menuID?e._e():n("a-popconfirm",{attrs:{title:"确认通过吗?"},on:{confirm:function(t){return e.changeChargeLineStatus(3)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:chargedline:hawbchangechargelinestatus",expression:"`api:admin:chargedline:hawbchangechargelinestatus`",arg:"permission"}],attrs:{type:"primary"}},[e._v("费用通过")])],1),e.loading||0xebaae1200045!=e.menuID?e._e():n("a-popconfirm",{attrs:{title:"确认驳回吗?"},on:{confirm:function(t){return e.changeChargeLineStatus(1)}}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:chargedline:hawbchangechargelinestatus",expression:"`api:admin:chargedline:hawbchangechargelinestatus`",arg:"permission"}],attrs:{type:"danger"}},[e._v("费用驳回")])],1),n("my-search",{attrs:{fields:e.fields},on:{click:e.onSearch}})],1)]},proxy:!0}])}),n("vxe-table",{ref:"xTable",attrs:{"keep-source":"",data:e.hAirwayBillList,loading:e.loading,"print-config":{},"show-overflow":"",resizable:"",border:"","highlight-hover-row":"",height:e.minHeight,"expand-config":{lazy:!0,loadMethod:e.loadContentMethod}}},[n("vxe-column",{attrs:{type:"checkbox",width:"50",fixed:"left"},scopedSlots:e._u([{key:"header",fn:function(t){var a=t.checked;t=t.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleAllCheckboxRow()}}},[n("span",t?[n("a-checkbox",{attrs:{indeterminate:!0}})]:a?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}},{key:"checkbox",fn:function(t){var a=t.row,r=t.checked;t=t.indeterminate;return[n("span",{staticClass:"custom-checkbox",on:{click:function(t){return t.stopPropagation(),e.$refs.xTable.toggleCheckboxRow(a)}}},[n("span",t?[n("a-checkbox",{attrs:{indeterminate:!0}})]:r?[n("a-checkbox",{attrs:{checked:!0}})]:[n("a-checkbox")],1)])]}}])}),n("vxe-column",{attrs:{type:"expand",width:"50",fixed:"left"},scopedSlots:e._u([{key:"content",fn:function(t){return t=t.row,[n("ExpendTable",{ref:"expend"+t.id,attrs:{arlist:t.arlist,aplist:t.aplist,arCount:t.arCount,apCount:t.apCount,taskTypes:e.taskTypes,settlementpeopleList:e.settlementpeopleList,chargeList:e.chargeList,costMainStatuss:e.costMainStatuss}})]}}])}),n("vxe-column",{attrs:{field:"orderNo",title:"业务编号"}}),n("vxe-column",{attrs:{field:"hawb",title:"分单号"}}),n("vxe-column",{attrs:{field:"mawb",title:"主单号"}}),n("vxe-column",{attrs:{field:"entrustCode",title:"委托人"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._l(e.consignorList,(function(t){return[t.corporationCode==a.entrustCode?n("span",{key:t.corporationCode},[e._v(e._s(t.corporationName))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"loadingPort",title:"起运港"}}),n("vxe-column",{attrs:{field:"destinationPort",title:"目的港"}}),n("vxe-column",{attrs:{field:"tradeTerms",title:"贸易条款"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._l(e.tradeClauses,(function(t){return[t.value==a.tradeTerms?n("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"actualPieces",title:"件数"}}),n("vxe-column",{attrs:{field:"actualWeight",title:"重量"}}),n("vxe-column",{attrs:{field:"actualVolume",title:"体积"}}),n("vxe-column",{attrs:{field:"arStatus",title:"应收状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._l(e.costMainStatuss,(function(t){return[t.value==a.arStatus?n("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"apStatus",title:"应付状态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._l(e.costMainStatuss,(function(t){return[t.value==a.apStatus?n("span",{key:t.value},[e._v(e._s(t.name))]):e._e()]}))]}}])}),n("vxe-column",{attrs:{field:"headCount",title:"毛利"},scopedSlots:e._u([{key:"default",fn:function(t){return t=t.row,[t.headCount?n("span",{staticStyle:{"font-weight":"bold",color:"#f50","font-size":"14px"}},[e._v(e._s(t.headCount))]):e._e()]}}])}),n("vxe-column",{attrs:{width:"50",title:"操作",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("a-space",[n("a-tooltip",{attrs:{placement:"top",title:"查看详情"}},[n("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:seahairwaybillexport:gethederanddetailasync",expression:"`api:admin:seahairwaybillexport:gethederanddetailasync`",arg:"permission"}],attrs:{type:"primary",size:"small",icon:"account-book"},on:{click:function(t){return e.review(a)}}})],1)],1)]}}])})],1),n("vxe-pager",{attrs:{"current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,total:e.pagination.totalResult,"page-sizes":[20,50,100,200],layouts:["PrevPage","JumpNumber","NextPage","Sizes","Total"]},on:{"page-change":e.handlePageChange}})],1)}),[],!1,null,"62e06c08",null).exports;t.default=f},"597e":function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"m",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"g",(function(){return w})),n.d(t,"f",(function(){return x})),n.d(t,"e",(function(){return R})),n.d(t,"l",(function(){return k})),n.d(t,"k",(function(){return E})),n.d(t,"b",(function(){return L}));t=n("96cf");var a=n("1da1"),r=n("7424"),i=n("b775");function o(e,t,n,a){return s.apply(this,arguments)}function s(){return(s=Object(a.a)(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTGETPAGE,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:a,filter:o}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return(c=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTADD,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTUPDATE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTBATCHSOFTDELETE,i.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTGETHEDERANDDETAILASYNC,i.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTGETMOREHAWBTOMAWBASYNC,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTCHANGESTATUSASYNC,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return S.apply(this,arguments)}function S(){return(S=Object(a.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTGETHAWBCOLLISTASYNC,i.a.GET));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return A.apply(this,arguments)}function A(){return(A=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTDOWNPAGEASYNC,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n,a){return T.apply(this,arguments)}function T(){return(T=Object(a.a)(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTCHARGEPAGEASYNC,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:a,filter:o}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTINSERTSELECTEDSETOCODE,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return C.apply(this,arguments)}function C(){return(C=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTHAWBCHANGECHARGESTATUS,i.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,n,a){return P.apply(this,arguments)}function P(){return(P=Object(a.a)(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.e)(r.SEAHAIRWAYBILLEXPORTBMSHAWBCHARGEPAGEASYNC,i.a.POST,{currentPage:t,pageSize:n,dynamicFilter:a,filter:o}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"6f9b":function(e,t,n){"use strict";n("9008")},9008:function(e,t,n){}}]);