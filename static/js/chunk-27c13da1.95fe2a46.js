(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-27c13da1"],{"0994":function(e,t,r){"use strict";r("813f")},"786d":function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"g",(function(){return u})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return f})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return T}));var a=r("1da1"),n=(r("96cf"),r("7424")),o=r("b775");function s(e,t,r){return i.apply(this,arguments)}function i(){return(i=Object(a.a)(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTGETPAGE,o.a.POST,{currentPage:t,pageSize:r,dynamicFilter:a}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTADD,o.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTUPDATE,o.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return(p=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTBATCHSOFTDELETE,o.a.PUT,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return(g=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTGETHEDERANDDETAILASYNC,o.a.GET,{id:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTGETSELECTSETTLEMENTOBJECT,o.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o.e)(n.SETTLEMENTOBJECTGETSELECTSETTLEMENTOBJECTBYMAWB,o.a.POST,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},"813f":function(e,t,r){},c126:function(e,t,r){"use strict";r.r(t),r("d9e2"),r("4de4"),r("d3b7"),r("d81d"),r("25f0");var a=r("786d"),n=r("4c2d"),o=r("a701"),s=r("cdc0"),i=r("4a67"),c=r("9056"),l=r("fddf"),u=r("cdeb");u={name:"EditSettlementObject",i18n:r("9225"),components:{SettlementObjectLine:u.a},data:function(){var e=this;return{ID:this.$route.query.id,TYPE:this.$route.query.type,settlementObjectLineList:[],mergeCells:[],businessTypes:[],tradeClauses:[],consignorList:[],portList:[],ARAPs:[],taskTypes:[],costCalcSources:[],bindingDocs:[],chargeList:[],currencyList:[],settlementpeopleList:[],carrierList:[],form:{setOCode:"",setOName:"",businessType:"",entrustCode:"",loadingPort:"",destinationPort:"",trade:"",remark:"",bindingDoc:""},rules:{setOCode:[{required:!0,message:"请输入规则代码",trigger:"change"}],setOName:[{required:!0,message:"请输入规则名称",trigger:"change"}],businessType:[{required:!0,message:"请选择业务类型",trigger:"change"}],entrustCode:[{validator:function(t,r,a){0==r.length?0==e.form.bindingDoc?a(new Error("请选择委托人")):a(new Error("请选择航司")):a()},trigger:"change",required:!0}],loadingPort:[{required:!0,message:"请选择起运港",trigger:"change"}],destinationPort:[{required:!0,message:"请选择目的港",trigger:"change"}],trade:[{required:!0,message:"请选择贸易条款",trigger:"change"}],bindingDoc:[{required:!0,message:"请选择绑定单据",trigger:"change"}]},loading:!1,disabled:!1}},created:function(){"0"==this.ID&&"1"==this.TYPE&&this.getCode(),"0"!==this.ID&&"2"==this.TYPE&&this.getSettlementObject(),this.getDictionary()},methods:{getCode:function(){var e=this;Object(n.c)("AccountingRules").then((function(t){1===t.data.code&&(e.form.setOCode=t.data.data.rtRuleCode)}))},getDictionary:function(){var e=this;Object(i.c)(1).then((function(t){1===t.data.code&&(e.portList=t.data.data)})),Object(c.c)().then((function(t){1===t.data.code&&(e.chargeList=t.data.data)})),Object(l.c)().then((function(t){1===t.data.code&&(e.currencyList=t.data.data)})),Object(s.f)(["Consignor","Settlementpeople","Carrier"]).then((function(t){1===t.data.code&&(t=t.data.data,e.consignorList=t.filter((function(e){return"Consignor"===e.corporationtype}))[0].data,e.settlementpeopleList=t.filter((function(e){return"Settlementpeople"===e.corporationtype}))[0].data,e.carrierList=t.filter((function(e){return"Carrier"===e.corporationtype}))[0].data)})),Object(o.d)(["BusinessType","TradeClause","ARAP","TaskType","CostCalcSource","BindingDoc"]).then((function(t){1===t.data.code&&(t=t.data.data,e.businessTypes=t.filter((function(e){return"BusinessType"===e.code}))[0].data,e.tradeClauses=t.filter((function(e){return"TradeClause"===e.code}))[0].data,e.ARAPs=t.filter((function(e){return"ARAP"===e.code}))[0].data,e.taskTypes=t.filter((function(e){return"TaskType"===e.code}))[0].data,e.costCalcSources=t.filter((function(e){return"CostCalcSource"===e.code}))[0].data,e.bindingDocs=t.filter((function(e){return"BindingDoc"===e.code}))[0].data)}))},getSettlementObject:function(){var e=this;this.disabled=!0,Object(a.c)(this.ID).then((function(t){var r,a;1===t.data.code&&(e.form=t.data.data,e.settlementObjectLineList=t.data.data.setODetail,e.mergeCells=[],r=[],a=[],e.settlementObjectLineList&&0<e.settlementObjectLineList.length&&e.settlementObjectLineList.map((function(t,n){1==t.arap?(r.push(n),e.mergeCells.push({row:r[0],col:1,rowspan:r.length,colspan:1})):(a.push(n),e.mergeCells.push({row:a[0],col:1,rowspan:a.length,colspan:1}))})),e.disabled=!1)}))},save:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.loading=!0,"0"==e.ID?Object(a.a)(e.form).then((function(t){1===t.data.code?(e.ID=t.data.data.toString(),e.loading=!1,e.$message.success("保存成功!"),e.getSettlementObject(),e.$refreshPage("/SettlementObject")):(e.loading=!1,e.$message.error(t.data.msg))})):Object(a.g)(e.form).then((function(t){1===t.data.code?(e.loading=!1,e.$message.success("保存成功!"),e.getSettlementObject(),e.$refreshPage("/SettlementObject")):(e.loading=!1,e.$message.error(t.data.msg))})))}))}}},r("0994"),r=r("2877"),r=Object(r.a)(u,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"EditSettlementObject"},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end","margin-bottom":"10px"}},[r("a-button",{directives:[{name:"auth",rawName:"v-auth:permission",value:"api:admin:settlementobject:add",expression:"`api:admin:settlementobject:add`",arg:"permission"}],attrs:{type:"primary",loading:e.loading,disabled:e.disabled},on:{click:e.save}},[e._v("保存")])],1),r("a-form-model",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("a-row",{attrs:{gutter:[0,0]}},[r("a-col",{attrs:{span:18}},[r("a-card",[r("a-row",{attrs:{gutter:[0,0]}},[r("a-col",{attrs:{span:6}},[r("a-form-model-item",{attrs:{label:"规则代码",prop:"setOCode"}},[r("a-input",{attrs:{"max-length":20,disabled:""},model:{value:e.form.setOCode,callback:function(t){e.$set(e.form,"setOCode",t)},expression:"form.setOCode"}})],1)],1),r("a-col",{attrs:{span:6}},[r("a-form-model-item",{attrs:{label:"规则名称",prop:"setOName"}},[r("a-input",{attrs:{"max-length":20},model:{value:e.form.setOName,callback:function(t){e.$set(e.form,"setOName",t)},expression:"form.setOName"}})],1)],1),r("a-col",{attrs:{span:6}},[r("a-form-model-item",{attrs:{label:"绑定单据",prop:"bindingDoc"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},on:{change:function(t){e.form.entrustCode=""}},model:{value:e.form.bindingDoc,callback:function(t){e.$set(e.form,"bindingDoc",t)},expression:"form.bindingDoc"}},e._l(e.bindingDocs,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("a-col",{attrs:{span:6}},[r("a-form-model-item",{attrs:{label:"业务类型",prop:"businessType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.businessType,callback:function(t){e.$set(e.form,"businessType",t)},expression:"form.businessType"}},e._l(e.businessTypes,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.code}})})),1)],1)],1)],1),r("a-row",{attrs:{gutter:[0,0]}},[r("a-col",{attrs:{span:6}},[r("a-form-model-item",{attrs:{label:"起运港",prop:"loadingPort"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.loadingPort,callback:function(t){e.$set(e.form,"loadingPort",t)},expression:"form.loadingPort"}},e._l(e.portList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.portCode,value:e.portCode}})})),1)],1)],1),r("a-col",{attrs:{span:6}},[r("a-form-model-item",{attrs:{label:"目的港",prop:"destinationPort"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.destinationPort,callback:function(t){e.$set(e.form,"destinationPort",t)},expression:"form.destinationPort"}},e._l(e.portList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.portCode,value:e.portCode}})})),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"备注",prop:"remark"}},[r("a-input",{attrs:{"max-length":200},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1)],1),r("a-col",{attrs:{span:6}},[r("a-card",[r("a-row",{attrs:{gutter:[0,0]}},[r("a-col",{attrs:{span:24}},[0==e.form.bindingDoc?r("a-form-model-item",{attrs:{label:"委托人",prop:"entrustCode"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.entrustCode,callback:function(t){e.$set(e.form,"entrustCode",t)},expression:"form.entrustCode"}},e._l(e.consignorList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.corporationName,value:e.corporationCode}})})),1)],1):e._e(),1==e.form.bindingDoc?r("a-form-model-item",{attrs:{label:"航司",prop:"entrustCode"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.entrustCode,callback:function(t){e.$set(e.form,"entrustCode",t)},expression:"form.entrustCode"}},e._l(e.carrierList,(function(e,t){return r("el-option",{key:t,attrs:{label:e.corporationName,value:e.corporationCode}})})),1)],1):e._e()],1)],1),0==e.form.bindingDoc?r("a-row",{attrs:{gutter:[0,0]}},[r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"贸易条款",prop:"trade"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:""},model:{value:e.form.trade,callback:function(t){e.$set(e.form,"trade",t)},expression:"form.trade"}},e._l(e.tradeClauses,(function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1):e._e()],1)],1)],1)],1),r("SettlementObjectLine",{attrs:{ID:e.ID,loading:e.disabled,settlementObjectLineList:e.settlementObjectLineList,mergeCells:e.mergeCells,ARAPs:e.ARAPs,taskTypes:e.taskTypes,costCalcSources:e.costCalcSources,chargeList:e.chargeList,currencyList:e.currencyList,settlementpeopleList:e.settlementpeopleList}})],1)}),[],!1,null,"a494eed0",null).exports;t.default=r}}]);